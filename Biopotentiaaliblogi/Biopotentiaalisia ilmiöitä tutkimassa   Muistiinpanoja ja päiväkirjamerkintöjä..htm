<!DOCTYPE html>
<!-- saved from url=(0026)http://blog.macrowear.com/ -->
<html lang="en-US" class=" js flexbox canvas canvastext postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<title>Biopotentiaalisia ilmiöitä tutkimassa | Muistiinpanoja ja päiväkirjamerkintöjä.</title>
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="http://blog.macrowear.com/xmlrpc.php">


<meta name="robots" content="noindex,nofollow">
<link rel="alternate" type="application/rss+xml" title="Biopotentiaalisia ilmiöitä tutkimassa » Feed" href="http://blog.macrowear.com/feed/">
<link rel="alternate" type="application/rss+xml" title="Biopotentiaalisia ilmiöitä tutkimassa » Comments Feed" href="http://blog.macrowear.com/comments/feed/">
<link rel="stylesheet" id="github-embed-css" href="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/github-embed.css" type="text/css" media="all">
<link rel="stylesheet" id="responsive-lightbox-swipebox-front-css" href="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/swipebox.css" type="text/css" media="all">
<link rel="stylesheet" id="rotatingtweets-css" href="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/style.css" type="text/css" media="all">
<link rel="stylesheet" id="jetpack-widgets-css" href="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/widgets.css" type="text/css" media="all">
<link rel="stylesheet" id="mediamaven_style-css" href="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/style(1).css" type="text/css" media="all">
<link rel="stylesheet" id="video-js-css-css" href="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/video-js.css" type="text/css" media="all">
<link rel="stylesheet" id="video-js-kg-skin-css" href="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/kg-video-js-skin.css" type="text/css" media="all">
<link rel="stylesheet" id="kgvid_video_styles-css" href="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/kgvid_styles.css" type="text/css" media="all">
<link rel="stylesheet" id="sharedaddy-css" href="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/sharing.css" type="text/css" media="all">
<link rel="stylesheet" id="wp-stats-css" href="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/stats-css.css" type="text/css" media="all">
<script type="text/javascript" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/jquery.js"></script>
<script type="text/javascript" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/jquery-migrate.min.js"></script>
<script type="text/javascript" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/jquery.swipebox.min.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var rlArgs = {"script":"swipebox","selector":"lightbox","activeGalleries":"1","animation":"1","hideBars":"1","hideBarsDelay":"5000","videoMaxWidth":"1080"};
/* ]]> */
</script>
<script type="text/javascript" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/front.js"></script>
<script type="text/javascript" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/cdfplugin.js"></script>
<script type="text/javascript" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/Chart.min.js"></script>
<script type="text/javascript" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/modernizr-2.6.1.min.js"></script>
<script type="text/javascript" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/scripts.js"></script>
<script type="text/javascript" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/video.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var ajax_object = {"ajaxurl":"http:\/\/blog.macrowear.com\/wp-admin\/admin-ajax.php"};
/* ]]> */
</script>
<script type="text/javascript" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/kgvid_video_embed.js"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://blog.macrowear.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://blog.macrowear.com/wp-includes/wlwmanifest.xml"> 
<meta name="generator" content="WordPress 3.6.1">
<link rel="shortlink" href="http://wp.me/42VuU">
<script type="text/javascript" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/jsapi"></script><script type="text/javascript">google.load('visualization', '1', {packages: ['corechart']});</script><script src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/saved_resource" type="text/javascript"></script><link href="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/ui+en.css" type="text/css" rel="stylesheet"><script src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/format+en,default+en,ui+en,corechart+en.I.js" type="text/javascript"></script>	<link type="text/css" rel="stylesheet" href="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/shCoreDefault.css">
    <!--[if lte IE 8]><script src="http://blog.macrowear.com/wp-content/plugins/wp-charts/js/excanvas.compiled.js"</script><![endif]-->	<style>
    			/*wp_charts_js responsive canvas CSS override*/
    			.wp_charts_canvas {
    				width:100%!important;
    				max-width:100%;
    			}
    		</style>
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="blog">
<meta property="og:title" content="Biopotentiaalisia ilmiöitä tutkimassa">
<meta property="og:description" content="Muistiinpanoja ja päiväkirjamerkintöjä.">
<meta property="og:url" content="http://blog.macrowear.com/">
<meta property="og:site_name" content="Biopotentiaalisia ilmiöitä tutkimassa">
<style type="text/css">
/* <![CDATA[ */
img.latex { vertical-align: middle; border: none; }
/* ]]> */
</style>
<style type="text/css" id="custom-background-css">
body.custom-background { background-color: #f2f2f2; background-image: url('http://macrowear.com/blog/wp-content/themes/media-maven/library/images/bg.jpg'); background-repeat: repeat; background-position: top left; background-attachment: fixed; }
</style>
<script type="text/javascript">videojs.options.flash.swf = "http://blog.macrowear.com/wp-content/plugins/video-embed-thumbnail-generator/video-js/video-js.swf?4.0.0"</script>
<link rel="stylesheet" type="text/css" id="gravatar-card-css" href="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/hovercard.css"><link rel="stylesheet" type="text/css" id="gravatar-card-services-css" href="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/services.css"></head>

<body class="home blog custom-background">
<div id="container">
	<header id="branding" role="banner">
      <div id="inner-header" class="clearfix">
		<hgroup id="site-heading">
			<h1 id="site-title"><a href="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä..htm" title="Biopotentiaalisia ilmiöitä tutkimassa" rel="home">Biopotentiaalisia ilmiöitä tutkimassa</a></h1>
			<h2 id="site-description">Muistiinpanoja ja päiväkirjamerkintöjä.</h2>
		</hgroup>

		<nav id="access" role="navigation">
			<h1 class="assistive-text section-heading">Main menu</h1>
			<div class="skip-link screen-reader-text"><a href="http://blog.macrowear.com/#content" title="Skip to content">Skip to content</a></div>
			<div class="menu"><div id="menu-icon">Menu</div><ul><li class="current_page_item"><a href="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä..htm" title="Home">Home</a></li><li class="page_item page-item-220"><a href="http://blog.macrowear.com/bci/">BCI</a></li><li class="page_item page-item-453"><a href="http://blog.macrowear.com/raspberry-pi-cam/">Raspberry Pi Cam</a></li><li class="page_item page-item-73"><a href="http://blog.macrowear.com/tietoa-blogista/">Tietoa blogista</a></li></ul></div>
			<form role="search" method="get" id="searchform" class="searchform" action="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä..htm">
				<div>
					<label class="screen-reader-text" for="s">Search for:</label>
					<input type="text" value="" name="s" id="s">
					<input type="submit" id="searchsubmit" value="Search">
				</div>
			</form>		</nav><!-- #access -->
        

      </div>


	</header><!-- #branding -->

    <div id="content" class="clearfix">
        
        <div id="main" class="col620 clearfix" role="main">

			
								
					
<article id="post-367" class="post-367 post type-post status-publish format-standard hentry category-mlp category-neuroverkko tag-neuroverkko tag-nn">
		<header class="entry-header">
		<h1 class="entry-title"><a href="http://blog.macrowear.com/2013/11/neuroverkko-signaalintunnistuksessa/" title="Permalink to Neuroverkko aivosähkösignaalin tunnistuksessa" rel="bookmark">Neuroverkko aivosähkösignaalin tunnistuksessa</a></h1>

				<div class="entry-meta">
			<span class="sep">Posted on </span><a href="http://blog.macrowear.com/2013/11/neuroverkko-signaalintunnistuksessa/" title="10:08 pm" rel="bookmark"><time class="entry-date" datetime="2013-11-01T22:08:21+00:00">November 1, 2013</time></a><span class="byline"> <span class="sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://blog.macrowear.com/author/pasihe/" title="View all posts by pasihe" rel="author">pasihe</a></span></span>		</div><!-- .entry-meta -->
			</header><!-- .entry-header -->

		<div class="entry-content post_content">
		<p>Perinteiset signaalinkäsittelyn keinot perustuvat usein tarkkoihin ennaltamääriteltyihin algoritmeihin ja proseduureihin joissa signaalia tutkitaan ja muokataan askel kerrallaan. Nämä vaativat toimiakseen parametreja joilla asetetaan ehtoja ja vertailuarvoja jotta saavutetaan odotettu lopputulos. Parametreja voikin pitää jopa tärkeämpänä kuin itse algoritmeja. Neuroverkot vievät tämän äärimmäisyyksiin, niissä käytetään hyvin yksinkertaisia algoritmeja mutta erittäin pitkälle optimoituja parametreja. Neuroverkot lähestyvät ongelmanratkaisua algoritmiikan ja matemaattisen suunnittelun sijaan yrityksen ja erehdyksen kautta. Neuroverkolle opetetaan esimerkkien eli havaintoaineiston avulla muuttujien epälineaariset riippuvuussuhteet.&nbsp;Neuroverkkojen opettaminen tapahtuu syöttämällä neuroverkolle dataa ja muuttamalla&nbsp;synapsien painoarvoja datan syöttämisen aikana.</p>
<p>Ihminen lainaa keinoja luonnosta, pienimmän vaikutuksen periaatteen voi nähdä heijastuvan neuroverkon rakenteen takaa. Perinteiset tietokoneet ovat surkeita ymmärtämään puhetta tai tunnistamaan kasvoja kun taas ihmiset ovat tässä luonnostaan hyviä. Ihmisellä ja muilla eläimillä neuroneja on useita miljardeja. Keinotekoisessa neuroverkkolaskennassa saavutetaan riittävä lopputulos jopa alle kymmenellä neuronilla, sillä toistokertoja jolla opetusalgoritmia ajetaan voidaan ajaa tuhansia sekunnissa. Eräs käytetyimmistä neuroverkkorakenteista on monikerrosverkko joka koostuu syötekerroksesta, piilokerroksesta ja vastekerroksesta (output). Kerroksissa on keinotekoisia toisiinsa kytkettyjä neuroneja joita kutakin voi ajatella tiedonkäsittely-yksikkönä. Tiedonkäsittely-yksikkö pitää sisällään synapsin, summaajan ja aktivointifunktion. Synapsi on kytkentä kahden neuronin välillä, jolle on opetusmateriaalilla laskettu tietty painoarvo. Kuvassa on ns. eteenpäinkytketty monikerroksinen perseptroniverkko eli MLP.</p>
<p style="text-align: center;"><img class="aligncenter size-full wp-image-370" style="border: 1px solid black;" alt="MLP" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/mlp.jpg" width="479" height="306"></p>
<h3>Käydään pinnan alla</h3>
<p>Sukellusveneen kaikuluotain voitaisiin rakentaa ja ohjelmoida käyttämään neuroverkkoa tunnistamaan signaalista tietynlaisia rakenteita. Jos mittaustietoa on paljon ja muuttujien väliset riippuvuussuhteet vaikeasti ennustettavia eli funktiomuotoa ei tiedetä, niin regressioanalyysikään ei välttämättä anna hyviä tuloksia.&nbsp;Siinä missä perinteinen signaalinkäsittely suorittaa sarjan korrelaatioita ja fourier muunnoksia saaden näytteistä taajusspektrin analysoitua niin kehittynyt luotain voisi syöttää 1000-2000 näytepistettä opetettuun neuroverkkoon joka pullauttaa ulos vastauksen minkälainen rakenne on havaittu. Käytännössä tällaiseen neuroverkkoon ladataan etsittävän rakenteen opetusmateriaalilla lasketut painoarvot. Tutkittava signaali eli näytepisteet syötetään tämän jälkeen verkkoon ja lopputulos lasketaan painoarvoilla. Lopputulos voisi noudattaa vaikkapa kaksiarvologiikkaa joka vastaisi onko kyseessä: sukellusvene (1) kyllä vai (0) ei, valas &nbsp;(1) kyllä, (0) ei, oktonautit (1) kyllä, (0) ei. Kuvaa ei siten tarvitse enää erikseen tulkita. Järjestelmän kykyä tunnistaa voidaan laajentaa yksinkertaisesti opettamalla havaintoaineistosta. Tällainen järjestelmä ei siten vaadi algoritmeja eikä säännöstöä vaan ainoastaan minkälainen suhde syötteen ja vasteen välillä vallitsee eli painoarvot.</p>
<p style="text-align: center;"><img class="aligncenter  wp-image-405" style="border: 1px solid black;" alt="octo" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/octo.jpg" width="368" height="277"></p>
<p>Jokainen vaste (output) määritellään syötteiden ja painokertoimien avulla.&nbsp;Summaajaa voidaan kuvata sarjakehitelmällä:</p>
<p><img class="alignnone size-full wp-image-440" alt="painok" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/painok.gif" width="113" height="53"><br>
Missä:&nbsp;<img src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/latex.php" alt="k" title="k" class="latex"> on syöteneuroni,&nbsp;<img src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/latex(1).php" alt="j" title="j" class="latex"> on vasteneuroni,&nbsp;<img src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/latex(2).php" alt="w_{kj}" title="w_{kj}" class="latex">&nbsp;on synaptinen painoarvo,&nbsp;<img src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/latex(3).php" alt="x_{j}" title="x_{j}" class="latex">&nbsp;&nbsp;ovat syötesignaaleja.&nbsp;Aktivaatiofunktio laskee summasta&nbsp;<img src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/latex(4).php" alt="u_{k}" title="u_{k}" class="latex"> epälineaarisen kuvauksen:</p>
<p><img class="alignnone size-full wp-image-441" alt="phi" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/phi.gif" width="119" height="19"><br>
missä:&nbsp;<img src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/latex(5).php" alt="y_{k}" title="y_{k}" class="latex"> on ulostulosignaali,&nbsp;<img src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/latex(6).php" alt="b_{k}" title="b_{k}" class="latex"> on vakiotermi eli ns. bias.</p>
<p>Aktivaatiofunktio valitaan sen mukaan miten vasteen halutaan normalisoituvan. Jos halutaan vasteen olevan väliltä 0..1 niin aktivaatiofunktioksi kelpaa yleisesti käytetty log-sigmoidi-funktio:</p>
<p><img class="alignnone size-full wp-image-442" alt="sigm2" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/sigm2.gif" width="154" height="20"><br>
Ja jos vaste on oltava väliltä -1..1 niin valitaan hyperbolinen tangentti:</p>
<p><img class="alignnone size-full wp-image-443" alt="tanh" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/tanh.gif" width="125" height="19"><br>
Myös muita aktivaatiofunktioita käytetään ja näistä ehkä yksinkertaisin on Heaviside jolloin neuroni joko aktivoituu tai ei aktivoidu eli ulostulosignaali on joko 1 tai 0.</p>
<p><img class="alignnone size-full wp-image-444" alt="heavi" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/heavi.gif" width="167" height="44"></p>
<p>&nbsp;</p>
<h3>Haukataan merivettä ja noustaan pintaan</h3>
<p>Neuroverkon opetus ohjatun oppimisen menetelmällä tapahtuu näin:</p>
<ol>
<li>arvataan painokerroinvektori</li>
<li>Lasketaan satunnaisesti valitun syötteen vaste arvatuilla painokertoimilla.</li>
<li>verrataan tätä todelliseen vasteeseen</li>
<li>mikäli poikkeama on yli sallitun (minimivirhe), muutetaan painokertoimia tietyn algortimin mukaisesti (gradientin suuntaan)</li>
<li>Mennään kohtaan 2. eli lasketaan uusi vaste.</li>
</ol>
<p>Aivosähkösignaalit ovat yksilöllistä, toisaalta tietyt vireystilat ja häiriöt voidaan analysoida signaalin taajuusspektristä helpostikin mutta esimerkiksi henkilön ajatus yhdestä suuntakoordinaatista on jo hyvin hankala analyyttisesti ratkaista. &nbsp;Neuroverkolla tämä toteutuu siten, että EEG-laitetta käyttävää henkilöä pyydetään ajattelemaan tiettyä suuntaa esimerkiksi vasenta muutamia kertoja. Syntyvästä aivosähkösignaalista kerätään mobiililaitteen softalla nopealla fouriermuunnoksella talteen taajuuden komponentit jotka ajetaan neuroverkon läpi opetusaineistona, tavoitevaste on asetettu ykköseksi ja verkko käyttää log-sigmoidia aktivaatiofunktiona, kun verkko on saavuttanut minimivirheen eli on riittävän lähellä tavoitevastetta, talletetaan painokerroinvektori tiedostoon "vasen.pkv". Sama opetus tehdään myös suunnille: "oikea", "ylös" ja "alas". Kullekin suunnalle syntyy painokerroinvektoritiedosto ja kussakin painokerroinvektoritiedostossa on tieto siitä mitä suuntaa ko. tiedosto tarkoittaa. Kun nyt henkilö ajattelee jotain suuntaa, luetaan taas signaalin taajuuskomponentit ja ajetaan ne neuroverkon läpi lataamalla yksitellen eri painokerroinvektoritiedostot myös verkkoon. Kerrotaan taajuuskomponentit painokertoimien kanssa ja summataan, kun vastaukseksi saadaan 1 tai minimivirheen rajoissa oleva lähellä ykköstä oleva tulos, ollaan löydetty suunta jota henkilö ajatteli. Suuntatiedolla voidaan edelleen ohjata mobiililaitetta ja sillä vaikkapa peliä.</p>
<p>&nbsp;</p>
<h3>Log-sigmoidi ja bias</h3>
<p>Miksi käyttää juuri log-sigmoidia? Siksi, koska askelfunktion tai jonkun muun "jyrkän" funktion lopputulos ei ole riittävät hienovarainen. Log-sigmoid muodostaa s-muotoisen kuvauksen ja vielä tärkeämpää on, että &nbsp;se on derivoitavissa mikä on vaadittava ominaisuus aktivointifunktiolle kun opetetaan verkkoa ja lasketaan painokertoimia.&nbsp;Tällaisia symmetristä funktiota käytettäessä opetuksessa muuttuu jokaisen neuronin arvo pehmeästi.&nbsp;Bias-termi mahdollistaa aktivointifunktio siirtymän oikealle tai vasemmalle. Mitä tämä sitten hyödyttää?</p>
<p><img class="size-full wp-image-410" style="border: 1px solid black;" alt="sigmoid-scale" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/sigmoid-scale.png" width="640" height="480"><br>
Neuroverkko laskee uuden vasteen kertomalla painokerroin syötteellä ja tämä tulo viedään vielä jonkin aktivointifunktion läpi esimerkiksi log-sigmoidin. Kuva esittää vasteen arvoja eri painokertoimilla. Muuttamalla painokerrointa muuttuu myös sigmoid-funktion jyrkkyys. Mitä jos nyt kuitenkin haluttaisiin, että vaste eli neuroverkon ulostulo olisi 0 kun syöte on 2? Sigmoidin jyrkkyyden muuttaminen ei auta vaan tarvittaisiin keino siirtää koko käyräparvistoa oikealle. Tässä kohtaa bias-termistä on hyötyä. Sigmoid-funktiolle välitettäisiin siis tulot:&nbsp;sig(w0*x + w1*1.0) ja Biasoitu sigmoidkuvaaja näyttäisi tältä:</p>
<p><img class="alignnone size-full wp-image-411" style="border: 1px solid black;" alt="sigmoid_biasoitu" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/sigmoid_biasoitu.png" width="640" height="480"><br>
Nyt kun painokerroin on -5, neuroverkon ulostulo on 0 kun x on 2. Samalla jyrkkyys pysyy samana.</p>
<p>&nbsp;</p>
<h3>Back-propagation algoritmi</h3>
<p>Backpropagation-algoritmi on laskevaan gradienttiin perustuva optimointimenetelmä jolla haettu optimaalinen piste löytyy, kun edetään aloituspisteestä aina negatiivisen gradientin suuntaan. Negatiivinen gradientti osoittaa suuntaan, jossa funktion arvo pienenee nopeiten.<br>
Etsittävän funktion minimi on siis pisteessä, jossa verkon vasteet ovat keskimäärin mahdollisimman lähellä haluttuja vasteita. Vasteessa havaittu virhe generoidaan verkkoon takaisin eri kerroksien painokertoimiin.<br>
<img class="size-medium wp-image-437 alignnone" style="border: 1px solid black;" alt="350px-Gradient_ascent_(contour)" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/350px-Gradient_ascent_contour-300x298.png" width="300" height="298"><br>
Laskevan gradientin polun kehitys opetusalgortimin aikana.</p>
<p>Neuroverkon opetusta voi ajatella maastokartalle jossa on tasaisia kohtia sekä ylä- ja alamäkiä. Oppiminen tapahtuu iteratiivisesti ja oppimiskäyrä etenee laskentakierroksittain maastossa lyhintä mahdollista reittiä kohti matalinta kohtaa joka kuvaa minimivirhettä suhteessa toivottuun vasteeseen.&nbsp;Uudet painokertoimet saadaan osittaisderivoimalla ja kulkemalla painokertoimen negatiivisen gradientin suuntaisesti pienin askelin kohti minimivirhettä. Toisin sanoen painokertoimen laskennan kohdalla ollaan kiinnostuttu vain siitä kuinka vaste muuttuu kun tämä kyseinen painokerroin muuttuu ja kaikki muut pysyvät paikoillaan. Seuraava Back-propagation verkon opetusalgoritmin matemaattinen kuvaus.</p>
<p><strong>Verkon kerroksien vasteiden summayhtälöt</strong></p>
<p>Piilokerroksen matriisille Y vaste on:<br>
<strong><br>
<img class="alignnone size-full wp-image-415" alt="hidden_vaste" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/hidden_vaste.gif" width="168" height="40"><br>
</strong>jossa&nbsp;<em>ϕ&nbsp;</em>on aktivointifunktio ja&nbsp;<em>μ&nbsp;</em>syötevektorin järjestysnumero.<br>
Ja edelleen vastekerrokselle vaste on:</p>
<p><img class="alignnone size-full wp-image-416" alt="output_vaste" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/output_vaste.gif" width="388" height="43"></p>
<p><strong>Virhetermin laskenta</strong></p>
<p>MLP-verkon oppiminen perustuu siihen, että perceptron-neuroneiden painot&nbsp;<i>w</i><sub><i>i&nbsp;</i></sub>valitaan mahdollisimman optimaalisesti. Optimaalisen valinnan perusteena on joku MLP-verkolle määritetty virhefunktio. Yksi ongelmaan soveltuva virhefunktio <em>E(W) </em>on verkon vasteen virheen neliöiden summa:</p>
<p><img class="alignnone size-full wp-image-413" alt="virhe" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/virhe.gif" width="201" height="50"><br>
Missä <em>W</em> on kaikkien kerroksien painot <em>wij&nbsp;</em>sisältävä painomatriisi<em>,&nbsp;</em><em>d&nbsp;</em>on syötevektoria vastaava haluttu vaste ja o verkon vaste syötteelle <em>x</em>.<br>
Koko esimerkin kaksikerroksiselle verkolle virhefunktio on siten:</p>
<p><img class="alignnone size-full wp-image-414" alt="kokoverkonvirhe" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/kokoverkonvirhe.gif" width="379" height="48"></p>
<p><strong>Korjaustermin laskenta</strong></p>
<p>Painokertoimia korjataan yleensä negatiivisen gradientin suuntaan.<br>
Korjaustermi verkon vastekerrokselle tulevalle painokertoimille saadaan derivoimalla virhetermi&nbsp;<em>E vij </em>suhteen:</p>
<p><img class="alignnone size-full wp-image-418" alt="partialvij" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/partialvij.gif" width="129" height="44"><br>
missä <em>n </em>on opetuskerroin joka määritellään ongelmasta riippuen välille 10^-6...0.1. Opetuskertoimella asetetaan muutoksen määrä negatiivisen gradientin suuntaan.&nbsp;Vastaavasti korjaustermi syötekerroksen painokertoimille on:</p>
<p><img class="alignnone size-full wp-image-419" alt="partialwij" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/partialwij.gif" width="137" height="44"></p>
<p>Neuroverkkoa testatessa voi tulla vastaan tilanteita joissa verkko juuttuu ns. lokaaliin minimiin. Toisin sanoen kun oppiminen tapahtuu negatiivisen gradientin suuntaan, saattaa käydä niin, että edellä kuvatun maastokartta-analogian oppimismaastossa on paikallisia kuoppia mutta koko maaston matalin kohta on muualla. Verkko saattaa jäädä tähän paikalliseen kuoppaan ja todellinen globaali minimi jää saavuttamatta. &nbsp;Samaan tapaan loivassa alamäessä vierivä kuula voi pysähtyä keskellä mäkeä olevaan kuoppaan. Tähän löytyy ratkaisu niin, että työnnetään kuulaa myös kuopassa samalla nopeudella kuin ennen kuoppaa jolloin kuulan onnistuu vieriä yli kuopan ja jatkamaan matkaansa. Verkolle joka on jäänyt lokaaliin minimiin, eli &nbsp;Deltaw tai Deltav arvo ei muutu, voidaan käyttää samaa ideaa; lisätään yhtälöön edellisen laskentakierroksen muutosnopeus kerrottuna jollain kertoimella. Tätä kutsutaan momentumiksi:</p>
<p><img class="alignnone size-full wp-image-448" alt="momentum" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/momentum.gif" width="100" height="20"></p>
<p>ja Delta-yhtälö momentumilla saa muodon:</p>
<p><img class="alignnone size-full wp-image-449" alt="delta_ja_momentum" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/delta_ja_momentum.gif" width="260" height="44"></p>
<p>Näistä derivoidaan E, saadaan lopputulokseksi painokertoimien backpropagation algoritmille muutosyhtälöt:</p>
<p><img class="alignnone size-full wp-image-420" alt="kokovij" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/kokovij.gif" width="348" height="43"><br>
<img class="alignnone size-full wp-image-421" alt="kokowij" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/kokowij.gif" width="487" height="43"><br>
Aktivointifunktioksi <em>ϕ</em>&nbsp;valittiin derivoituva funktio log-sigmoidi:</p>
<p><img class="alignnone size-full wp-image-422" alt="sigmoidi" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/sigmoidi.gif" width="119" height="39"><br>
<img class="alignnone size-full wp-image-423" alt="sigmoidderivaatta" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/sigmoidderivaatta.gif" width="201" height="23"><br>
ja asettamalla vakio <em>c=1,&nbsp;</em>saadaan aktivointifunktion derivaataksi:</p>
<p><img class="alignnone size-full wp-image-424" alt="sigmoidderivaatta2" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/sigmoidderivaatta2.gif" width="171" height="19"></p>
<p><strong>Mallinnetaan koodiksi</strong></p>
<p>Matemaattinen osuus on käsitelty. Seuraavana on toteutettu yhtälöt toimivana koodina.&nbsp;Alla Pythonilla koodattu neuroverkon alustus ja opetus. Pythonin syntaksin ilmaisuvoimalla saadaan selkeästi kuvattua koko back-propagation neuroverkon lataus ja opetus.</p>
<div id="highlighter_584079" class="syntaxhighlighter  Brush"><div class="bar                                                                       "><div class="toolbar"><a href="http://blog.macrowear.com/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_584079_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_584079" menu="false" src="http://blog.macrowear.com/wp-content/plugins/syntax-highlighter-with-add-button-in-editor/scripts/clipboard.swf"></div></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>001</code></td><td class="content"><code class="Brush keyword">import</code> <code class="Brush plain">random</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>002</code></td><td class="content"><code class="Brush keyword">import</code> <code class="Brush plain">cPickle as pickle</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>003</code></td><td class="content"><code class="Brush keyword">from</code> <code class="Brush plain">math </code><code class="Brush keyword">import</code> <code class="Brush plain">exp</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>004</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>005</code></td><td class="content"><code class="Brush keyword">def</code> <code class="Brush plain">init_net():</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>006</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">"""</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>007</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">verkon alustus sekä lataus.</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>008</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">Tämä on ainoa funktio mitä tarvitaan</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>009</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">kun ladataan syöte jo opetetulle verkolle</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>010</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">"""</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>011</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>012</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments"># alustetaan piilokerroksen vaste Y</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>013</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">for</code> <code class="Brush plain">j </code><code class="Brush keyword">in</code> <code class="Brush functions">xrange</code><code class="Brush plain">(</code><code class="Brush value">4</code><code class="Brush plain">):</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>014</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush functions">sum</code><code class="Brush keyword">=</code><code class="Brush value">0</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>015</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">for</code> <code class="Brush plain">i </code><code class="Brush keyword">in</code> <code class="Brush functions">xrange</code><code class="Brush plain">(</code><code class="Brush value">15</code><code class="Brush keyword">+</code><code class="Brush value">1</code><code class="Brush plain">):</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>016</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush functions">sum</code><code class="Brush keyword">=</code><code class="Brush functions">sum</code> <code class="Brush keyword">+</code> <code class="Brush plain">x[i] </code><code class="Brush keyword">*</code> <code class="Brush plain">w[j][i]</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>017</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">Y[j] </code><code class="Brush keyword">=</code> <code class="Brush value">1</code><code class="Brush keyword">/</code><code class="Brush plain">(</code><code class="Brush value">1</code><code class="Brush keyword">+</code><code class="Brush plain">exp(</code><code class="Brush keyword">-</code><code class="Brush functions">sum</code><code class="Brush plain">))</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>018</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>019</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments"># alustetaan vastekerroksen vaste o</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>020</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">for</code> <code class="Brush plain">j </code><code class="Brush keyword">in</code> <code class="Brush functions">xrange</code><code class="Brush plain">(</code><code class="Brush value">1</code><code class="Brush plain">):</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>021</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush functions">sum</code><code class="Brush keyword">=</code><code class="Brush value">0</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>022</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">for</code> <code class="Brush plain">i </code><code class="Brush keyword">in</code> <code class="Brush functions">xrange</code><code class="Brush plain">(</code><code class="Brush value">4</code><code class="Brush plain">):</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>023</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush functions">sum</code><code class="Brush keyword">=</code><code class="Brush functions">sum</code> <code class="Brush keyword">+</code> <code class="Brush plain">Y[i] </code><code class="Brush keyword">*</code> <code class="Brush plain">v[j][i]</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>024</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">o[j] </code><code class="Brush keyword">=</code> <code class="Brush value">1</code><code class="Brush keyword">/</code><code class="Brush plain">(</code><code class="Brush value">1</code><code class="Brush keyword">+</code><code class="Brush plain">exp(</code><code class="Brush keyword">-</code><code class="Brush functions">sum</code><code class="Brush plain">))</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>025</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>026</code></td><td class="content"><code class="Brush keyword">def</code> <code class="Brush plain">init_weights():</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>027</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">"""</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>028</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">lasketaan opetuksessa</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>029</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">alkuarvot painokertoimille</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>030</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">"""</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>031</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>032</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments"># lasketaan satunnaiset arvot syötevektorin painokerroinmatriisille</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>033</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">for</code> <code class="Brush plain">j </code><code class="Brush keyword">in</code> <code class="Brush functions">xrange</code><code class="Brush plain">(</code><code class="Brush value">4</code><code class="Brush plain">):</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>034</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush functions">sum</code><code class="Brush keyword">=</code><code class="Brush value">0</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>035</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">for</code> <code class="Brush plain">i </code><code class="Brush keyword">in</code> <code class="Brush functions">xrange</code><code class="Brush plain">(</code><code class="Brush value">15</code><code class="Brush keyword">+</code><code class="Brush value">1</code><code class="Brush plain">):</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>036</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">w[j][i]</code><code class="Brush keyword">=</code> <code class="Brush plain">random.uniform(</code><code class="Brush keyword">-</code><code class="Brush value">0.0005</code><code class="Brush plain">, </code><code class="Brush value">0.0005</code><code class="Brush plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>037</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>038</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments"># lasketaan satunnaiset arvot piilokerroksen painokerroinmatriisille</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>039</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">for</code> <code class="Brush plain">j </code><code class="Brush keyword">in</code> <code class="Brush functions">xrange</code><code class="Brush plain">(</code><code class="Brush value">1</code><code class="Brush plain">):</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>040</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush functions">sum</code><code class="Brush keyword">=</code><code class="Brush value">0</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>041</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">for</code> <code class="Brush plain">i </code><code class="Brush keyword">in</code> <code class="Brush functions">xrange</code><code class="Brush plain">(</code><code class="Brush value">4</code><code class="Brush plain">):</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>042</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">v[j][i]</code><code class="Brush keyword">=</code> <code class="Brush plain">random.uniform(</code><code class="Brush keyword">-</code><code class="Brush value">0.0005</code><code class="Brush plain">, </code><code class="Brush value">0.0005</code><code class="Brush plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>043</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>044</code></td><td class="content"><code class="Brush keyword">def</code> <code class="Brush plain">netError():</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>045</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">"""</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>046</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">Koko verkon virhefunktio E(W)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>047</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">"""</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>048</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>049</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments"># päivitetään Y</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>050</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">for</code> <code class="Brush plain">j </code><code class="Brush keyword">in</code> <code class="Brush functions">xrange</code><code class="Brush plain">(</code><code class="Brush value">4</code><code class="Brush plain">):</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>051</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush functions">sum</code><code class="Brush keyword">=</code><code class="Brush value">0</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>052</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">for</code> <code class="Brush plain">i </code><code class="Brush keyword">in</code> <code class="Brush functions">xrange</code><code class="Brush plain">(</code><code class="Brush value">15</code><code class="Brush keyword">+</code><code class="Brush value">1</code><code class="Brush plain">):</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>053</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush functions">sum</code><code class="Brush keyword">=</code><code class="Brush functions">sum</code> <code class="Brush keyword">+</code> <code class="Brush plain">x[i] </code><code class="Brush keyword">*</code> <code class="Brush plain">w[j][i]</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>054</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">Y[j] </code><code class="Brush keyword">=</code> <code class="Brush value">1</code><code class="Brush keyword">/</code><code class="Brush plain">(</code><code class="Brush value">1</code><code class="Brush keyword">+</code><code class="Brush plain">exp(</code><code class="Brush keyword">-</code><code class="Brush functions">sum</code><code class="Brush plain">))</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>055</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>056</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments"># päivitetään o</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>057</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">for</code> <code class="Brush plain">j </code><code class="Brush keyword">in</code> <code class="Brush functions">xrange</code><code class="Brush plain">(</code><code class="Brush value">1</code><code class="Brush plain">):</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>058</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush functions">sum</code><code class="Brush keyword">=</code><code class="Brush value">0</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>059</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">for</code> <code class="Brush plain">i </code><code class="Brush keyword">in</code> <code class="Brush functions">xrange</code><code class="Brush plain">(</code><code class="Brush value">4</code><code class="Brush plain">):</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>060</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush functions">sum</code><code class="Brush keyword">=</code><code class="Brush functions">sum</code> <code class="Brush keyword">+</code> <code class="Brush plain">Y[i] </code><code class="Brush keyword">*</code> <code class="Brush plain">v[j][i]</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>061</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">o[j] </code><code class="Brush keyword">=</code> <code class="Brush value">1</code><code class="Brush keyword">/</code><code class="Brush plain">(</code><code class="Brush value">1</code><code class="Brush keyword">+</code><code class="Brush plain">exp(</code><code class="Brush keyword">-</code><code class="Brush functions">sum</code><code class="Brush plain">))</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>062</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>063</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">return</code> <code class="Brush plain">d</code><code class="Brush keyword">-</code><code class="Brush plain">o[</code><code class="Brush value">0</code><code class="Brush plain">]</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>064</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>065</code></td><td class="content"><code class="Brush keyword">def</code> <code class="Brush plain">netNewWeights():</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>066</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">"""</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>067</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">Painokerroinmatriisien uudelleenlaskenta, DeltaW ja DeltaV</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>068</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">"""</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>069</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments"># syötevektorin painokerroinmatriisi</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>070</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">for</code> <code class="Brush plain">j </code><code class="Brush keyword">in</code> <code class="Brush functions">xrange</code><code class="Brush plain">(</code><code class="Brush value">4</code><code class="Brush plain">):</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>071</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">for</code> <code class="Brush plain">i </code><code class="Brush keyword">in</code> <code class="Brush functions">xrange</code><code class="Brush plain">(</code><code class="Brush value">15</code><code class="Brush keyword">+</code><code class="Brush value">1</code><code class="Brush plain">):</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>072</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">sigmoid_slopeo </code><code class="Brush keyword">=</code> <code class="Brush plain">o[</code><code class="Brush value">0</code><code class="Brush plain">]</code><code class="Brush keyword">*</code><code class="Brush plain">(</code><code class="Brush value">1</code><code class="Brush keyword">-</code><code class="Brush plain">o[</code><code class="Brush value">0</code><code class="Brush plain">])</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>073</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">sigmoid_slopeh </code><code class="Brush keyword">=</code> <code class="Brush plain">Y[j]</code><code class="Brush keyword">*</code><code class="Brush plain">(</code><code class="Brush value">1</code><code class="Brush keyword">-</code><code class="Brush plain">Y[j])</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>074</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">delta </code><code class="Brush keyword">=</code> <code class="Brush plain">x[i]</code><code class="Brush keyword">*</code><code class="Brush plain">sigmoid_slopeh</code><code class="Brush keyword">*</code><code class="Brush plain">v[</code><code class="Brush value">0</code><code class="Brush plain">][j]</code><code class="Brush keyword">*</code><code class="Brush plain">sigmoid_slopeo</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>075</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">w[j][i]</code><code class="Brush keyword">=</code> <code class="Brush plain">w[j][i]</code><code class="Brush keyword">+</code><code class="Brush plain">delta</code><code class="Brush keyword">*</code><code class="Brush plain">d_minus_o</code><code class="Brush keyword">*</code><code class="Brush plain">n</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>076</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>077</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments"># piilokerroksen painokerroinmatriisi</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>078</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">for</code> <code class="Brush plain">j </code><code class="Brush keyword">in</code> <code class="Brush functions">xrange</code><code class="Brush plain">(</code><code class="Brush value">1</code><code class="Brush plain">):</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>079</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">for</code> <code class="Brush plain">i </code><code class="Brush keyword">in</code> <code class="Brush functions">xrange</code><code class="Brush plain">(</code><code class="Brush value">4</code><code class="Brush plain">):</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>080</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">sigmoid_slopeo </code><code class="Brush keyword">=</code> <code class="Brush plain">o[</code><code class="Brush value">0</code><code class="Brush plain">]</code><code class="Brush keyword">*</code><code class="Brush plain">(</code><code class="Brush value">1</code><code class="Brush keyword">-</code><code class="Brush plain">o[</code><code class="Brush value">0</code><code class="Brush plain">])</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>081</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">delta </code><code class="Brush keyword">=</code> <code class="Brush plain">Y[i]</code><code class="Brush keyword">*</code><code class="Brush plain">sigmoid_slopeo</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>082</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">v[j][i]</code><code class="Brush keyword">=</code> <code class="Brush plain">v[j][i]</code><code class="Brush keyword">+</code><code class="Brush plain">delta</code><code class="Brush keyword">*</code><code class="Brush plain">d_minus_o</code><code class="Brush keyword">*</code><code class="Brush plain">n</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>083</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>084</code></td><td class="content"><code class="Brush comments"># -- NEUROVERKON OPETUSITERAATIO --------------------- #</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>085</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>086</code></td><td class="content"><code class="Brush plain">d</code><code class="Brush keyword">=</code><code class="Brush value">1</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="Brush comments"># toivottu tulos</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>087</code></td><td class="content"><code class="Brush plain">E_W</code><code class="Brush keyword">=</code><code class="Brush value">0</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="Brush comments"># virhetermien summa</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>088</code></td><td class="content"><code class="Brush plain">d_minus_o</code><code class="Brush keyword">=</code><code class="Brush value">0</code> <code class="Brush comments"># neliöllinen virhe, eli (d-0)^2</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>089</code></td><td class="content"><code class="Brush plain">n</code><code class="Brush keyword">=</code><code class="Brush value">0.005</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="Brush comments"># hienokorjausvakio</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>090</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>091</code></td><td class="content"><code class="Brush comments"># syötevektori</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>092</code></td><td class="content"><code class="Brush plain">x </code><code class="Brush keyword">=</code> <code class="Brush plain">[</code><code class="Brush value">0</code> <code class="Brush keyword">for</code> <code class="Brush plain">i </code><code class="Brush keyword">in</code> <code class="Brush functions">xrange</code><code class="Brush plain">(</code><code class="Brush value">15</code><code class="Brush keyword">+</code><code class="Brush value">1</code><code class="Brush plain">)]</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>093</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>094</code></td><td class="content"><code class="Brush comments"># bias-termi</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>095</code></td><td class="content"><code class="Brush plain">x[</code><code class="Brush value">15</code><code class="Brush plain">]</code><code class="Brush keyword">=</code><code class="Brush value">1</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>096</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>097</code></td><td class="content"><code class="Brush comments"># syötevektoria vastaava painokerroinmatriisi</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>098</code></td><td class="content"><code class="Brush plain">w </code><code class="Brush keyword">=</code> <code class="Brush plain">[[</code><code class="Brush value">0</code> <code class="Brush keyword">for</code> <code class="Brush plain">j </code><code class="Brush keyword">in</code> <code class="Brush functions">xrange</code><code class="Brush plain">(</code><code class="Brush value">15</code><code class="Brush keyword">+</code><code class="Brush value">1</code><code class="Brush plain">)] </code><code class="Brush keyword">for</code> <code class="Brush plain">i </code><code class="Brush keyword">in</code> <code class="Brush functions">xrange</code><code class="Brush plain">(</code><code class="Brush value">4</code><code class="Brush plain">)]</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>099</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>100</code></td><td class="content"><code class="Brush comments"># piilokerroksen vaste</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>101</code></td><td class="content"><code class="Brush plain">Y </code><code class="Brush keyword">=</code> <code class="Brush plain">[</code><code class="Brush value">0</code> <code class="Brush keyword">for</code> <code class="Brush plain">j </code><code class="Brush keyword">in</code> <code class="Brush functions">xrange</code><code class="Brush plain">(</code><code class="Brush value">4</code><code class="Brush plain">)]</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>102</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>103</code></td><td class="content"><code class="Brush comments"># piilokerroksen vastetta vastaava painokerroinmatriisi</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>104</code></td><td class="content"><code class="Brush plain">v </code><code class="Brush keyword">=</code> <code class="Brush plain">[[</code><code class="Brush value">0</code> <code class="Brush keyword">for</code> <code class="Brush plain">j </code><code class="Brush keyword">in</code> <code class="Brush functions">xrange</code><code class="Brush plain">(</code><code class="Brush value">4</code><code class="Brush plain">)] </code><code class="Brush keyword">for</code> <code class="Brush plain">i </code><code class="Brush keyword">in</code> <code class="Brush functions">xrange</code><code class="Brush plain">(</code><code class="Brush value">1</code><code class="Brush plain">)]</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>105</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>106</code></td><td class="content"><code class="Brush comments"># verkon vastekerroksen vaste</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>107</code></td><td class="content"><code class="Brush plain">o </code><code class="Brush keyword">=</code> <code class="Brush plain">[</code><code class="Brush value">0</code> <code class="Brush keyword">for</code> <code class="Brush plain">j </code><code class="Brush keyword">in</code> <code class="Brush functions">xrange</code><code class="Brush plain">(</code><code class="Brush value">1</code><code class="Brush plain">)]</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>108</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>109</code></td><td class="content"><code class="Brush comments"># opetusiteraation sallittu minimivirhe</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>110</code></td><td class="content"><code class="Brush comments"># ja tarkistemuuttuja</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>111</code></td><td class="content"><code class="Brush functions">min</code> <code class="Brush keyword">=</code> <code class="Brush value">0.09</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>112</code></td><td class="content"><code class="Brush plain">loop</code><code class="Brush keyword">=</code><code class="Brush color1">True</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>113</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>114</code></td><td class="content"><code class="Brush comments"># jos verkko on jo opetettu ja tarkoitus käyttää sitä</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>115</code></td><td class="content"><code class="Brush comments"># signaalin/hahmontunnistamiseen, voidaan verkko ladata:</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>116</code></td><td class="content"><code class="Brush comments"># w,v =pickle.load( open( "c:\\painot.pkm", "rb" ) )</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>117</code></td><td class="content"><code class="Brush comments"># tällöin riittää pelkkä init_net() kutsu jolla saadaan</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>118</code></td><td class="content"><code class="Brush comments"># verkon vastekerros laskettua</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>119</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>120</code></td><td class="content"><code class="Brush plain">init_net()</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>121</code></td><td class="content"><code class="Brush plain">init_weights()</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>122</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>123</code></td><td class="content"><code class="Brush comments"># käydään n-kertaa syötevektori läpi</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>124</code></td><td class="content"><code class="Brush keyword">while</code> <code class="Brush plain">loop:</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>125</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">E_W</code><code class="Brush keyword">=</code><code class="Brush value">0</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>126</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">for</code> <code class="Brush plain">j </code><code class="Brush keyword">in</code> <code class="Brush plain">x:</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>127</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments"># lasketaan etäisyys odotettuun tulokseen 'd'</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>128</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments"># ja summataan koko verkon virhetermiin 'E_W'</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>129</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">d_minus_o </code><code class="Brush keyword">=</code> <code class="Brush plain">netError()</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>130</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">E_W </code><code class="Brush keyword">=</code> <code class="Brush plain">E_W </code><code class="Brush keyword">+</code> <code class="Brush functions">pow</code><code class="Brush plain">(d_minus_o,</code><code class="Brush value">2</code><code class="Brush plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>131</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments"># lasketaan uudet painokerroinmatriisit</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>132</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">netNewWeights()</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>133</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">if</code><code class="Brush plain">(E_W&lt;</code><code class="Brush functions">min</code><code class="Brush plain">): loop</code><code class="Brush keyword">=</code><code class="Brush color1">False</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>134</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush functions">print</code> <code class="Brush plain">E_W</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>135</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>136</code></td><td class="content"><code class="Brush comments"># talletetaan opetettu verkko ja syötevektori</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>137</code></td><td class="content"><code class="Brush plain">pickle.dump( x, </code><code class="Brush functions">open</code><code class="Brush plain">( </code><code class="Brush string">"c:\\syote.sv"</code><code class="Brush plain">, </code><code class="Brush string">"wb"</code> <code class="Brush plain">) )</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>138</code></td><td class="content"><code class="Brush plain">pickle.dump( [w,v], </code><code class="Brush functions">open</code><code class="Brush plain">( </code><code class="Brush string">"c:\\painot.pkm"</code><code class="Brush plain">, </code><code class="Brush string">"wb"</code> <code class="Brush plain">) )</code></td></tr></tbody></table></div></div></div>
<p>&nbsp;</p>
<p>Jo tällä pätkällä koodia saadaan luotua hyvinkin monimutkaisia ongelmia ratkova MLP-neuroverkko. Selkeyden vuoksi jätetty oliomalli ja Pythonin lambdafunktiot pois. Neuroverkosta löytyy hieman työstetympi, momentumin sisältävä ja testatumpi versio GitHubista:&nbsp;<a href="https://github.com/puuparta/tripping-octo-bear/blob/master/easynn.py">https://github.com/puuparta/tripping-octo-bear/blob/master/easynn.py</a>&nbsp;ja tälle on testiajon koodit:&nbsp;<a href="https://github.com/puuparta/tripping-octo-bear/blob/master/easynn_test.py">https://github.com/puuparta/tripping-octo-bear/blob/master/easynn_test.py</a></p>
			</div><!-- .entry-content -->
	
	<footer class="entry-meta">
								<span class="cat-links">
				Posted in <a href="http://blog.macrowear.com/category/mlp/" title="View all posts in MLP" rel="tag">MLP</a>, <a href="http://blog.macrowear.com/category/neuroverkko/" title="View all posts in neuroverkko" rel="tag">neuroverkko</a>			</span>
			<span class="sep"> | </span>
			
						<span class="tag-links">
				Tagged <a href="http://blog.macrowear.com/tag/neuroverkko/" rel="tag">neuroverkko</a>, <a href="http://blog.macrowear.com/tag/nn/" rel="tag">NN</a>			</span>
			<span class="sep"> | </span>
					
				<span class="comments-link"><a href="http://blog.macrowear.com/2013/11/neuroverkko-signaalintunnistuksessa/#respond" title="Comment on Neuroverkko aivosähkösignaalin tunnistuksessa">Leave a comment</a></span>
		<span class="sep"> | </span>
		
			</footer><!-- #entry-meta -->
</article><!-- #post-367 -->

				
					
<article id="post-260" class="post-260 post type-post status-publish format-standard hentry category-deltafunktio category-digitaalinen-suodatin category-dsp category-filtterit category-konvoluutio tag-dsp-2 tag-eeg-esitystapa tag-konvoluutio">
		<header class="entry-header">
		<h1 class="entry-title"><a href="http://blog.macrowear.com/2013/10/konvoluutio-ja-digitaalinen-suodatus/" title="Permalink to Konvoluutio ja digitaalinen suodatus" rel="bookmark">Konvoluutio ja digitaalinen suodatus</a></h1>

				<div class="entry-meta">
			<span class="sep">Posted on </span><a href="http://blog.macrowear.com/2013/10/konvoluutio-ja-digitaalinen-suodatus/" title="10:24 pm" rel="bookmark"><time class="entry-date" datetime="2013-10-19T22:24:54+00:00">October 19, 2013</time></a><span class="byline"> <span class="sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://blog.macrowear.com/author/pasihe/" title="View all posts by pasihe" rel="author">pasihe</a></span></span>		</div><!-- .entry-meta -->
			</header><!-- .entry-header -->

		<div class="entry-content post_content">
		<p>Digitaalisen signaalinkäsittelyn yksi ehkä merkittävimmistä asioista on konvoluutioteoria ja Fourier-muunnos toki seuraa perässä.&nbsp;Konvoluutio asettaa signaalinkäsittelyn koko matemaattisen viitekehyksen jolla voidaan muodostaa uusi signaali yhdistämällä kaksi muuta signaalia. Konvoluution tekee siis erityisen tärkeäksi se, että siinä yhdistyy syöte, lähtösignaali sekä impulssivaste.</p>
<p>Miksi ihmeessä käsittelen aihetta tässä työssä? Osaltaan tämä liittyy signaalin suodatukseen mutta painopiste on kuitenkin uudenlaisen biopotentiaalisignaalien esitysmuodon luonnissa josta tarkemmin työn loppuvaiheessa. Koska mittaustekniikka ja työ on tekemisissä puhtaasti luonnollisten diskreettien ilmiöiden kanssa, niin myös konvoluutiota tarkastellaan sen diskreettinä muotona. Eikä meillä todellisuudessa olisikaan reaaliaikamittauksessa jatkuvaa funktiota jonka yli integroisi. Asetetaan diskreetit kakkulat silmille ja katsotaan mitä kaninkolosta löytyy...</p>
<img src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/latex(7).php" alt="y[n] = x[n]*h[n] \overset{def}{=} \sum\limits_{k=-\infty }^{\infty}x[k]\cdot h[n-k]" title="y[n] = x[n]*h[n] \overset{def}{=} \sum\limits_{k=-\infty }^{\infty}x[k]\cdot h[n-k]" class="latex">
<p>Yllä on konvoluution diskreettimuoto sarjakehitelmänä. Matemaattinen formaali operaatio ja vieläpä hyvin yksinkertainen, samaan tapaan yhteenlasku ja kertolasku ovat operaatioita. Yhteenlasku ottaa kaksi lukua ja antaa kolmannen, konvoluutio ottaa kaksi signaalia ja tuottaa kolmannen. Yhtälö lyhyesti lausuttuna: syötesignaali x[n] kulkee yhdessä impulssivasteen h[n] kanssa jonkin systeemin läpi ja ulos tulee signaali y[n]. Eli syötesignaalin konvoluutio impulssivasteen kanssa on sama kuin systeemistä lähtevä signaali. Matemaatikko vielä toteaisi, että konvoluutio on kommutatiivinen. Tämä on käytännössäkin tärkeä asia, sillä jos järjestyksellä ei ole väliä x[n] * h[n] = h[n] * x[n], niin kommutatiivisuus antaa matemaattisen työkalun jonka kanssa voidaan olla murehtimatta siitä kumpi on impulssivaste ja kumpi syötesignaali.</p>
<p><img class="alignnone size-full wp-image-322" alt="Convolution_of_spiky_function_with_box2" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/Convolution_of_spiky_function_with_box2.gif" width="468" height="135"></p>
<p>Konvoluutiota käytetään paljon mm. kuvankäsittelyssä, soften, darken, emboss, blur ja monet muut filtterit on toteutettu konvoluutiolla. Digitaaliset suodattimet luodaan suunnittelemalla sopiva impulssivaste. Yksinkertaisin mahdollisin impulssivaste on deltafunktio eli yksikköimpulssifunktio. Systeemiin syötetty yksikköimpulssi tuottaa identtisen impulssin ulostulosignaaliin. Tämä tarkoittaa, että minkä tahansa signaalin konvoluutio deltafunktion kanssa tuottaa täsmälleen saman signaalin:</p>
<img src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/latex(8).php" alt="x[n]*\delta[n] = x[n]" title="x[n]*\delta[n] = x[n]" class="latex">
<p>Deltafunktio on konvoluution yksikköimpulssifunktio eli "neutraali-impulssi", samaan tapaan luku nolla on yhteenlaskun neutraalialkio ja luku yksi kertolaskun. Mitä mielenkiintoista deltafunktiossa sitten on jos se ei muuta signaalia? Paljonkin, moni signaalinkäsittely tapahtuukin ilman signaalin hajoittamista tai rakenteen muuttamista. Yksinkertainen esimerkki deltafunktion hyödystä on esim. vahvistus ja vaimennus:</p>
<p><img src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/latex(9).php" alt="x[n]*k\delta[n] = kx[n]" title="x[n]*k\delta[n] = kx[n]" class="latex"><br>
Yhtälö kertoo sen, että systeemillä joka vahvistaa tai vaimentaa signaalia on impulssivasteena skaalautuva deltafunktio. Yhtälössä kerroin k kuvastaa tätä vahvistusta tai vaimennusta. &nbsp;Toinen deltafunktion hyötynäkökohta ilmenee siirtofunktiona.&nbsp;Suhteellinen siirto syötesignaalin ja lähtösignaalin välillä vastaa impulssivastetta joka on deltafunktio siirtomuuttujalla:</p>
<img src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/latex(10).php" alt="x[n]*\delta[n+s] = x[n+s]" title="x[n]*\delta[n+s] = x[n+s]" class="latex">
<p>Muuttuja s määrittää kuinka paljon vasteessa on siirtymää; ennakkoa vai viivettä.<br>
Signaaliviiveen manipulointi sopivalla impulssivasteella on hyödyllistä ja elektroniikassa ja radiotekniikassa tuleekin paljon vastaan tilanteita joissa signaalissa on syystä tai toisesta viivettä. Esimerkkinä avaruusluotainten radiosignaalien pakettien tuottama viive tai kahden hermosolun potentiaalien viive. Viiveellä saadaan aikaiseksi myös kaikua. Kaiku on tärkeää monissa signaalia manipuloivissa laitteissa. Äänen nauhoituksessä kaikua käytetään tuottamaan luonnollisuutta tai sitä myös tarvittaessa poistetaan. Tutkat ja kaikuluotaimet analysoivat kaikuja. Geofyysikko käyttää kaikuja hyväksi löytääkseen öljyä. Puhelinlaitteet ja aktiiviset mikrofonilaitteet pyrkivät poistamaan kaikua tarvittaessa.</p>
<p>Deltafunktiota käytetään siis monessa signaalinkäsittelyä vaativassa järjestelmässä hyödyksi. &nbsp;Yksikköimpulssina kun halutaan signaalin siirtyvän tai tallettuvan muuttumattomana, signaalin vahvistuksessa ja vaimennuksessa, signaaliviiveen tai ennakon aikaansaamiseksi, kaiun synnyttämiseen. Kaiku tarkalleen ottaen saadaan aikaseksi kun impulssivaste on deltafunktio plus siirtoa ja skaalaa sisältävä deltafunktio eli:<br>
<img src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/latex(11).php" alt="x[n]*k\delta[n+s] = kx[n+s]" title="x[n]*k\delta[n+s] = kx[n+s]" class="latex"></p>
<p>&nbsp;</p>
<h3>Numeerinen konvoluutio</h3>
<p>Diskreetti konvoluutio on aina numeerinen, eli se lasketaan mitatuista arvoista arvo kerrallaan. Tässä havainnollistan asian step-by-step pienellä syötesignaalilla ja impulssivasteella. y olkoon lopputulos eli systeemistä uloslähtevä lähtösignaali, x on syötesignaali ja h on impulssivaste.<br>
Konvoluution diskreetti sarjakehitelmä eli yhtälö oli siis:<br>
<img src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/latex(12).php" alt="y[n] = x[n]*h[n] = \sum\limits_{k=-\infty }^{\infty}x[k]\cdot h[n-k]" title="y[n] = x[n]*h[n] = \sum\limits_{k=-\infty }^{\infty}x[k]\cdot h[n-k]" class="latex"></p>
<p>ja hieman lyhyemmässä muodossa:<br>
<img src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/latex(13).php" alt="y[n] = \sum x[k]\cdot h[n-k]" title="y[n] = \sum x[k]\cdot h[n-k]" class="latex"></p>
<p>Sarjakehitelmästä saadaan tehtyä näppärä algoritmi jolla voidaan tietokoneella laskea kahden signaalin konvoluutio. Määritellään vielä x ja h ja puretaan sen jälkeen algoritmi osiin. Huom: lähtösignaalin pituus on syötteen ja vasteen summa vähennettynä yhdellä.<br>
<img src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/latex(14).php" alt="x[n] = \left \{ 3,4,5 \right \}, h[n] = \left \{ 2,1 \right \}" title="x[n] = \left \{ 3,4,5 \right \}, h[n] = \left \{ 2,1 \right \}" class="latex"></p>
<p>Olen tehnyt kolme eri algoritmiversiota C#-kielellä. Jokainen toimii ja tuottaa saman lopputuloksen. Huomaa, että alue jonka yli summataan määritellään indeksillä k joka yhtälössä on asetettu äärettömäksi. Se ei käytännössä tietenkään ole ääretön vaan summattava alue riippuu siitä mitä signaalia käydään läpi. Em. konvoluution summayhtälöä eli sarjakehitelmää vastaa lähinnä ao. ensimmäinen algoritmi:</p>
<div id="highlighter_904650" class="syntaxhighlighter  Brush"><div class="bar        "><div class="toolbar"><a href="http://blog.macrowear.com/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_904650_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_904650" menu="false" src="http://blog.macrowear.com/wp-content/plugins/syntax-highlighter-with-add-button-in-editor/scripts/clipboard.swf"></div></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="Brush comments">//syötesignaali</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="Brush keyword">double</code><code class="Brush plain">[] x = </code><code class="Brush keyword">new</code> <code class="Brush keyword">double</code><code class="Brush plain">[] { 3, 4, 5 };</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="Brush comments">//impulssivaste</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="Brush keyword">double</code><code class="Brush plain">[] h = </code><code class="Brush keyword">new</code> <code class="Brush keyword">double</code><code class="Brush plain">[] { 2, 1 };</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="Brush comments">//lähtösignaali</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="Brush keyword">double</code><code class="Brush plain">[] y = </code><code class="Brush keyword">new</code> <code class="Brush keyword">double</code><code class="Brush plain">[4];</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="Brush comments">// konvoluutio, käydään läpi lähtösignaalin kautta</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="Brush keyword">for</code> <code class="Brush plain">(</code><code class="Brush keyword">int</code> <code class="Brush plain">n = 0; n &lt; y.Length; n++)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">// käydään läpi syötesignaali</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">for</code> <code class="Brush plain">(</code><code class="Brush keyword">int</code> <code class="Brush plain">k = 0; k &lt; x.Length; k++)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">// tarkistetaan ettei indeksi mene negatiiviseksi</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">if</code> <code class="Brush plain">(n - k &lt; 0) </code><code class="Brush keyword">continue</code><code class="Brush plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">// tarkistetaan myös, ettei mennä yli indeksin</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">if</code> <code class="Brush plain">(n - k &gt; h.Length-1) </code><code class="Brush keyword">continue</code><code class="Brush plain">; </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">// konvoloidaan</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">y[n] = y[n] + x[k] * h[n - k];</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div></div></div>
<p>Ja kuten aikaisemmin mainittiin, konvoluutio on kommutatiivinen. Algoritmissa tätä voidaan käyttää hyväksi esimerkiksi vaihtamalla signaaleja joita käydään silmukassa läpi. Lopputulos on edelleen sama:</p>
<div id="highlighter_792599" class="syntaxhighlighter  Brush"><div class="bar  "><div class="toolbar"><a href="http://blog.macrowear.com/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_792599_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_792599" menu="false" src="http://blog.macrowear.com/wp-content/plugins/syntax-highlighter-with-add-button-in-editor/scripts/clipboard.swf"></div></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="Brush comments">//syötesignaali</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="Brush keyword">double</code><code class="Brush plain">[] x = </code><code class="Brush keyword">new</code> <code class="Brush keyword">double</code><code class="Brush plain">[] { 3, 4, 5 };</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="Brush comments">//impulssivaste</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="Brush keyword">double</code><code class="Brush plain">[] h = </code><code class="Brush keyword">new</code> <code class="Brush keyword">double</code><code class="Brush plain">[] { 2, 1 };</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="Brush comments">//lähtösignaali</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="Brush keyword">double</code><code class="Brush plain">[] y = </code><code class="Brush keyword">new</code> <code class="Brush keyword">double</code><code class="Brush plain">[4];</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="Brush comments">// konvoluutio, käydään läpi lähtösignaalin kautta</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="Brush keyword">for</code> <code class="Brush plain">(</code><code class="Brush keyword">int</code> <code class="Brush plain">n = 0; n &lt; y.Length; n++)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">// käydään läpi impulssivaste</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">for</code> <code class="Brush plain">(</code><code class="Brush keyword">int</code> <code class="Brush plain">k = 0; k &lt; h.Length; k++)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">// tarkistetaan ettei indeksi mene negatiiviseksi</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">if</code> <code class="Brush plain">(n - k &lt; 0) </code><code class="Brush keyword">continue</code><code class="Brush plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">// tarkistetaan myös, ettei mennä yli indeksin</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">if</code> <code class="Brush plain">(n - k &gt; x.Length - 1) </code><code class="Brush keyword">continue</code><code class="Brush plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments">// konvoloidaan</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">y[n] = y[n] + h[k] * x[n-k];</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div></div></div>
<p>Konvoluutioalgoritmia voidaan vielä parantaa. Käytetään hyväksi tietoa, että lähtösignaalin pituus on yhtä kuin impulssivasteen + syötesignaalin pituus vähennettynä yhdellä, muodostetaan tästä tiivistetympi versio:</p>
<div id="highlighter_199611" class="syntaxhighlighter  Brush"><div class="bar "><div class="toolbar"><a href="http://blog.macrowear.com/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_199611_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_199611" menu="false" src="http://blog.macrowear.com/wp-content/plugins/syntax-highlighter-with-add-button-in-editor/scripts/clipboard.swf"></div></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="Brush keyword">double</code><code class="Brush plain">[] x = </code><code class="Brush keyword">new</code> <code class="Brush keyword">double</code><code class="Brush plain">[] {3,4,5};&nbsp; </code><code class="Brush comments">//syötesignaali</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="Brush keyword">double</code><code class="Brush plain">[] h = </code><code class="Brush keyword">new</code> <code class="Brush keyword">double</code><code class="Brush plain">[] {2,1};&nbsp;&nbsp;&nbsp; </code><code class="Brush comments">//impulssivaste</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="Brush keyword">double</code><code class="Brush plain">[] y = </code><code class="Brush keyword">new</code> <code class="Brush keyword">double</code><code class="Brush plain">[4];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="Brush comments">//lähtösignaali</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="Brush comments">// konvoluutio</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="Brush keyword">for</code> <code class="Brush plain">(</code><code class="Brush keyword">int</code> <code class="Brush plain">i=0; i &lt; x.Length; i++)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">for</code> <code class="Brush plain">(</code><code class="Brush keyword">int</code> <code class="Brush plain">j=0; j &lt; h.Length; j++)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">y[i + j] = y[i + j] + x[i] * h[j];</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="Brush plain">}</code></td></tr></tbody></table></div></div></div>
<p>Vastaukseksi saadaan:<br>
<img src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/latex(15).php" alt="\left \{ 3,4,5 \right \} * \left \{ 2,1 \right \} = \left \{ 6,11,14,5 \right \}" title="\left \{ 3,4,5 \right \} * \left \{ 2,1 \right \} = \left \{ 6,11,14,5 \right \}" class="latex"></p>
<p>&nbsp;</p>
<p><img class="alignnone size-full wp-image-324" style="border: 1px solid black;" alt="alice.hatter" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/alice.hatter.jpg" width="480" height="269"></p>
<h3>2D Konvoluutio</h3>
<p>Kuvankäsittelyssä konvoluutio toimii samalla tavalla kuin yksiulotteisen signaalin konvoluutio. Kuva voidaankin ajatella signaali-impulssien summana. Kuva on kaksiulotteinen ja jokainen alkio kaksiulotteisessa alkiossa sisältää pikselin. Pikseli on kolmiulotteinen taulukko kuvamatriisin alkion sisällä joka esittää 8-bittiset R,G,B värikomponentit. Tietorakenteena pikseli voi olla myös yksi- tai kaksiulotteinen. Kaksiulotteinen deltafunktio on kuva joka koostuu pelkistä nollista lukuunottamatta yhtä pikseliä jolla on arvo 1. Kaksiulotteista konvoluutiota käytetään kuvien suodatukseen, analysointiin ja hahmontunnistukseen. Samaan tapaan kuin edellä yksiulotteisessa konvoluutiossa, tarvitaan syöte eli kuva ja impulssivaste joka voi olla suodatinmatriisi tai vaikkapa kuvasta etsittävä hahmo. Kuvan suodatuksessa impulssivasteesta käytetään nimitystä 'kernel'. Kaksiulotteisen konvoluution diskreetti sarjakehitelmä on:<br>
<img src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/latex(16).php" alt="y[r,c] = h[r,c]*x[r,c] = \sum\limits_{k=0 }^{M-1}\sum\limits_{j=0 }^{M-1}h[k,j]\cdot x[r-k,c-j]" title="y[r,c] = h[r,c]*x[r,c] = \sum\limits_{k=0 }^{M-1}\sum\limits_{j=0 }^{M-1}h[k,j]\cdot x[r-k,c-j]" class="latex"></p>
<p>Sarjakehitelmässä on kaksi ulottuvuutta r ja c jotka kuvaavat kuvamatriisien rivejä ja sarakkeita, lisäksi on kaksi sisäkkäistä summafunktiota. Algoritmiin tulee siis neljä sisäkkäistä silmukkaa. Alla muutama esimerkki kuvalle tehtävästä konvoluutiosta Python-kielellä. Tätä kesti tovin kehitellä vaikkakin verkosta löytyy erilaisia viritelmiä. Havainnollistamisen vuoksi sarjakehitelmä python-kielellä ja matplot-, scipy-, numpy-kirjastoilla esitettynä:</p>
<p>&nbsp;</p>
<div id="highlighter_515809" class="syntaxhighlighter  Brush"><div class="bar                "><div class="toolbar"><a href="http://blog.macrowear.com/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_515809_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_515809" menu="false" src="http://blog.macrowear.com/wp-content/plugins/syntax-highlighter-with-add-button-in-editor/scripts/clipboard.swf"></div></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="Brush keyword">import</code> <code class="Brush plain">scipy.signal</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="Brush keyword">import</code> <code class="Brush plain">numpy as np</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="Brush keyword">import</code> <code class="Brush plain">matplotlib.pyplot as plot</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="Brush keyword">import</code> <code class="Brush plain">scipy.ndimage as ndimage</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="Brush comments"># aluksi implementoidaan konvoluutiofunktio</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="Brush keyword">def</code> <code class="Brush plain">convolve2d(input_img, kernel):</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">data </code><code class="Brush keyword">=</code> <code class="Brush plain">np.array(input_img)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">out_data </code><code class="Brush keyword">=</code> <code class="Brush plain">np.array(input_img)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments"># normalisoidaan, suodattimen summa oltava 1 jotta </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush comments"># säilytetään konvoloitaessa alkuperäinen "amplitudi"</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">if</code> <code class="Brush plain">np.</code><code class="Brush functions">sum</code><code class="Brush plain">(kernel)&lt;&gt;</code><code class="Brush value">0</code><code class="Brush plain">:</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">kernel </code><code class="Brush keyword">=</code> <code class="Brush plain">kernel</code><code class="Brush keyword">/</code><code class="Brush plain">np.</code><code class="Brush functions">sum</code><code class="Brush plain">(kernel)&nbsp; </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">for</code> <code class="Brush plain">r </code><code class="Brush keyword">in</code> <code class="Brush functions">xrange</code><code class="Brush plain">(data.shape[</code><code class="Brush value">0</code><code class="Brush plain">]):</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">for</code> <code class="Brush plain">c </code><code class="Brush keyword">in</code> <code class="Brush functions">xrange</code><code class="Brush plain">(data.shape[</code><code class="Brush value">1</code><code class="Brush plain">]):</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">out_data[r,c]</code><code class="Brush keyword">=</code><code class="Brush value">0</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">for</code> <code class="Brush plain">j </code><code class="Brush keyword">in</code> <code class="Brush functions">xrange</code><code class="Brush plain">(kernel.shape[</code><code class="Brush value">0</code><code class="Brush plain">]):</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">for</code> <code class="Brush plain">k </code><code class="Brush keyword">in</code> <code class="Brush functions">xrange</code><code class="Brush plain">(kernel.shape[</code><code class="Brush value">1</code><code class="Brush plain">]):</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">out_data[r,c] </code><code class="Brush keyword">=</code> <code class="Brush plain">out_data[r,c] </code><code class="Brush keyword">+</code> <code class="Brush plain">kernel[j,k] </code><code class="Brush keyword">*</code> <code class="Brush plain">data[r</code><code class="Brush keyword">-</code><code class="Brush plain">j,c</code><code class="Brush keyword">-</code><code class="Brush plain">j]</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush keyword">return</code> <code class="Brush plain">out_data</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="Brush comments"># Käytetään yllä kuvattua konvoluutiofunktiota</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="Brush comments"># luetaan kuva muistiin</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content"><code class="Brush plain">img </code><code class="Brush keyword">=</code> <code class="Brush plain">plot.imread(</code><code class="Brush string">'c:\\lena.png'</code><code class="Brush plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>26</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>27</code></td><td class="content"><code class="Brush comments"># määritellään konvoluutiomatriisi</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>28</code></td><td class="content"><code class="Brush comments"># tämä kuvaa reunantunnistus suodatinta</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>29</code></td><td class="content"><code class="Brush plain">kernel </code><code class="Brush keyword">=</code> <code class="Brush plain">np.array([[</code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">, </code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">, </code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">, </code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">, </code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">],</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>30</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">[</code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">,&nbsp; </code><code class="Brush value">1</code><code class="Brush plain">,&nbsp; </code><code class="Brush value">2</code><code class="Brush plain">,&nbsp; </code><code class="Brush value">1</code><code class="Brush plain">, </code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">],</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>31</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">[</code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">,&nbsp; </code><code class="Brush value">2</code><code class="Brush plain">,&nbsp; </code><code class="Brush value">4</code><code class="Brush plain">,&nbsp; </code><code class="Brush value">2</code><code class="Brush plain">, </code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">],</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>32</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">[</code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">,&nbsp; </code><code class="Brush value">1</code><code class="Brush plain">,&nbsp; </code><code class="Brush value">2</code><code class="Brush plain">,&nbsp; </code><code class="Brush value">1</code><code class="Brush plain">, </code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">],</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>33</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">[</code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">, </code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">, </code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">, </code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">, </code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">]])</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>34</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>35</code></td><td class="content"><code class="Brush plain">filtered_img</code><code class="Brush keyword">=</code><code class="Brush plain">convolve2d(img, kernel)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>36</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>37</code></td><td class="content"><code class="Brush comments"># piirretään alkuperäinen ja konvoloitu kuva näytölle</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>38</code></td><td class="content"><code class="Brush plain">plot.subplot(</code><code class="Brush value">2</code><code class="Brush plain">,</code><code class="Brush value">1</code><code class="Brush plain">,</code><code class="Brush value">1</code><code class="Brush plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>39</code></td><td class="content"><code class="Brush plain">plot.imshow(img)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>40</code></td><td class="content"><code class="Brush plain">plot.subplot(</code><code class="Brush value">2</code><code class="Brush plain">,</code><code class="Brush value">1</code><code class="Brush plain">,</code><code class="Brush value">2</code><code class="Brush plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>41</code></td><td class="content"><code class="Brush plain">plot.imshow(filtered_img)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>42</code></td><td class="content"><code class="Brush plain">plot.show()</code></td></tr></tbody></table></div></div></div>
<p style="text-align: center;"><a href="http://blog.macrowear.com/wp-content/uploads/2013/10/figure_11.png" rel="lightbox-0"><img class="aligncenter  wp-image-346" style="border: 0px;" alt="figure_1" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/figure_11-1024x523.png" width="717" height="366"></a>Lopputuloksena alkuperäinen Lena ja Lenan reunat näkyvissä</p>
<p style="text-align: left;">Kaksiulotteisuuden vuoksi jo pelkän kuvan konvoluutio on raskas prosessi puhumattakaan 3D kuvista. Tästä syystä kuvankäsittelyohjelmat ja muut useampiulotteista signaalia konvoloivat algortimit on tehty ns. FFT konvoluutiolla jossa päästään huomattavasti nopeampaan prosessointiin mitä edellä esittämäni algoritmi. Lisäksi monet matemaattiset ja kuvien hallintaan erikoistuneet kirjastot pitävät sisällään riittäviä valmiuksia toteuttaa valmiiden suodatusten ohella myös muokattuja suodatinkerneleitä eli kotitekoisia impulssivasteita. Lopputulos saattaa olla järjetön ja sanoinkuvaamaton mössö pikseleitä. Loppuun vielä sama reunantunnistus kernel ajettuna valmiilla kirjastolla:</p>
<div id="highlighter_417164" class="syntaxhighlighter  Brush"><div class="bar  "><div class="toolbar"><a href="http://blog.macrowear.com/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_417164_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_417164" menu="false" src="http://blog.macrowear.com/wp-content/plugins/syntax-highlighter-with-add-button-in-editor/scripts/clipboard.swf"></div></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="Brush keyword">import</code> <code class="Brush plain">matplotlib.pyplot as plot</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="Brush keyword">import</code> <code class="Brush plain">scipy.ndimage as ndimage</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="Brush comments"># määritellään konvoluutiomatriisi</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="Brush comments"># tämä kuvaa reunantunnistus suodatinta</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="Brush comments"># DSP mielessä ylipäästösuodatin</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="Brush plain">kernel </code><code class="Brush keyword">=</code> <code class="Brush plain">np.array([[</code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">, </code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">, </code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">, </code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">, </code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">],</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">[</code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">,&nbsp; </code><code class="Brush value">1</code><code class="Brush plain">,&nbsp; </code><code class="Brush value">2</code><code class="Brush plain">,&nbsp; </code><code class="Brush value">1</code><code class="Brush plain">, </code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">],</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">[</code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">,&nbsp; </code><code class="Brush value">2</code><code class="Brush plain">,&nbsp; </code><code class="Brush value">4</code><code class="Brush plain">,&nbsp; </code><code class="Brush value">2</code><code class="Brush plain">, </code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">],</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">[</code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">,&nbsp; </code><code class="Brush value">1</code><code class="Brush plain">,&nbsp; </code><code class="Brush value">2</code><code class="Brush plain">,&nbsp; </code><code class="Brush value">1</code><code class="Brush plain">, </code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">],</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="Brush plain">[</code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">, </code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">, </code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">, </code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">, </code><code class="Brush keyword">-</code><code class="Brush value">1</code><code class="Brush plain">]])</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="Brush plain">img </code><code class="Brush keyword">=</code> <code class="Brush plain">plot.imread(</code><code class="Brush string">'c:\\lena.png'</code><code class="Brush plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="Brush plain">filtered_img</code><code class="Brush keyword">=</code><code class="Brush plain">ndimage.convolve(img, kernel)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="Brush comments"># piirretään alkuperäinen ja konvoloitu kuva näytölle</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="Brush plain">plot.subplot(</code><code class="Brush value">2</code><code class="Brush plain">,</code><code class="Brush value">1</code><code class="Brush plain">,</code><code class="Brush value">1</code><code class="Brush plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="Brush plain">plot.imshow(img)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="Brush plain">plot.subplot(</code><code class="Brush value">2</code><code class="Brush plain">,</code><code class="Brush value">1</code><code class="Brush plain">,</code><code class="Brush value">2</code><code class="Brush plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="Brush plain">plot.imshow(filtered_img)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="Brush plain">plot.show()</code></td></tr></tbody></table></div></div></div>
<p>&nbsp;</p>
<blockquote><p>"Why is a raven like a writing desk?"<br>
"Have you guessed the riddle yet?" the Hatter said, turning to Alice again.<br>
"No, I give it up," Alice replied. "What's the answer?"<br>
"I haven't the slightest idea," said the Hatter.<br>
"Nor I," said the March Hare.<br>
Alice sighed wearily. "I think you might do something better with the time," she said, "than wasting it in asking riddles that have no answers."</p></blockquote>
<p>&nbsp;</p>
			</div><!-- .entry-content -->
	
	<footer class="entry-meta">
								<span class="cat-links">
				Posted in <a href="http://blog.macrowear.com/category/deltafunktio/" title="View all posts in deltafunktio" rel="tag">deltafunktio</a>, <a href="http://blog.macrowear.com/category/digitaalinen-suodatin/" title="View all posts in digitaalinen suodatin" rel="tag">digitaalinen suodatin</a>, <a href="http://blog.macrowear.com/category/dsp/" title="View all posts in DSP" rel="tag">DSP</a>, <a href="http://blog.macrowear.com/category/filtterit/" title="View all posts in filtterit" rel="tag">filtterit</a>, <a href="http://blog.macrowear.com/category/konvoluutio/" title="View all posts in konvoluutio" rel="tag">konvoluutio</a>			</span>
			<span class="sep"> | </span>
			
						<span class="tag-links">
				Tagged <a href="http://blog.macrowear.com/tag/dsp-2/" rel="tag">dsp</a>, <a href="http://blog.macrowear.com/tag/eeg-esitystapa/" rel="tag">eeg esitystapa</a>, <a href="http://blog.macrowear.com/tag/konvoluutio/" rel="tag">konvoluutio</a>			</span>
			<span class="sep"> | </span>
					
				<span class="comments-link"><a href="http://blog.macrowear.com/2013/10/konvoluutio-ja-digitaalinen-suodatus/#respond" title="Comment on Konvoluutio ja digitaalinen suodatus">Leave a comment</a></span>
		<span class="sep"> | </span>
		
			</footer><!-- #entry-meta -->
</article><!-- #post-260 -->

				
					
<article id="post-242" class="post-242 post type-post status-publish format-standard hentry category-ekosysteemi tag-atmega tag-bioanturi tag-ekosysteemi-2">
		<header class="entry-header">
		<h1 class="entry-title"><a href="http://blog.macrowear.com/2013/10/langattomien-bioantureiden-ekosysteemi/" title="Permalink to Langattomien bioantureiden ekosysteemi" rel="bookmark">Langattomien bioantureiden ekosysteemi</a></h1>

				<div class="entry-meta">
			<span class="sep">Posted on </span><a href="http://blog.macrowear.com/2013/10/langattomien-bioantureiden-ekosysteemi/" title="8:50 pm" rel="bookmark"><time class="entry-date" datetime="2013-10-13T20:50:24+00:00">October 13, 2013</time></a><span class="byline"> <span class="sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://blog.macrowear.com/author/pasihe/" title="View all posts by pasihe" rel="author">pasihe</a></span></span>		</div><!-- .entry-meta -->
			</header><!-- .entry-header -->

		<div class="entry-content post_content">
		<p>Paljon on kehitteillä älyvaatesuunnittelussa, mm. suomalaisen Reima Oy:n&nbsp;puettavan teknologian ja elektrotekstiilien tutkimuskeskus Clothing Plus Oy on yhdessä Philipsin kanssa kehittänyt kotikäyttöön tarkoitetun liivin, joka seuraa ylimääräisen nesteen kertymistä sydänsairaan keuhkoihin. Liivi tunnistaa uhkaavan nesteenkertymisen jopa kymmenen päivää ennen kuin potilas joutuisi sairaalahoitoon.</p>
<p>Puettava terveystekniikka, puettavat ohjaamot, pelihansikkaat jne. tulevat vauhdilla seuraavan parin vuoden aikana.<br>
Tampereen teknillinen yliopisto on mukana projektissa, jossa tutkitaan RFID-teknologian eli radiotaajuisen langattoman etätunnistusteknologian hyödyntämistä ihmiskehoon asennettavissa järjestelmissä. Lisäksi&nbsp;TTY:llä alkoi vuosi sitten HealthSens-projekti, jossa kehitetään ihoon kiinnitettävää, laastarin kaltaista mittalaitetta. Taipuisaan kalvoon tulostetulla elektroniikalla kerätään fysiologista tietoa, mm. EKG:tä ja EEG:tä.</p>
<p>Alla kuva omasta EEG/EMG mittalaitteen perusperiaatteesta jota taannoin hahmottelin seinälle. Hahmotelma hieman laajeni alkuperäisestä biopotentiaalilaitteen elektroniikan lohkokaaviosta ohjelmoitavien bioantureiden ekosysteemiin.</p>
<p><a href="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/20131012_150813.jpg" rel="lightbox-0"><img class="alignnone  wp-image-243" style="border: 1px solid black;" alt="20131012_150813" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/20131012_150813.jpg" width="1958" height="1469"></a></p>
<p>Piirsin Atmeli mikro-ohjaimesta erillisen AD muuntimen. Atmelin mikro-ohjaimien sisäänrakennettu AD muunnin kykenee vain 10bitin resoluutioon, se on lääketieteelliselle biomittauslaitteelle liian vähän mutta saattaa olla, että tässä työssä tulen oikaisemaan ja käyttämään hyvinkin suoraan ATMegan AD-muunninta.</p>
<p>&nbsp;</p>
<h3>Antureiden ekosysteemi</h3>
<p>Ekosysteemillä kuvan hyvin alustavassa ja raakileessa konsepti-ideassa tarkoitan sellaista kokonaisvaltaista järjestelmää jolla voidaan saada mm. kuluttajille ja peliteollisuuden sekä lääketieteenkin käyttöön helposti ja vaivattomasti puettavaa biotekniikkaa. Ekosysteemi sisältäisi mahdollisuuden ohjelmoida omia bioantureita suodattamaan signaaleja omilla haluamillaan algoritmeilla tai hankkimalla niitä ekosysteemin tarjoamasta jakeluverkosta esim. omasta kauppapaikasta tai käyttämällä hyväksi mobiililaitteiden sovelluskauppoja. Ohjelmoitavuus ei rajoittuisi algoritmeihin vaan mittaukselle voidaan asettaa triggereitä ja datan julkaisemiseen eri mahdollisuuksia, tätä voisi toteuttaa ns. if-this-then-that-keinoilla. Näillä algoritmeilla ja ohjelmilla voisi sitten käydä kauppaa halutessaan. Mainonnan lykkääminen biosignaalin väliin saattaa olla kinkkisempi juttu. Oman bioanturiohjelmoinnin mahdollistaa rajapinta, olkoon nimeltään vaikkapa BIOAPI. Lisäksi tarvitaan SDK joka tarjoaa työkalusetin ohjelmien tekemiseen. Itsenäisten aktiivisten bioantureiden tulisi olla mahdollisimman helposti puettavissa, tähän saattaa lähitulevaisuuden kehitys tulostettavan elektroniikan saralla tarjota mahdollisuuden elektroniikkalaastareiden muodossa, myös kaksipuoleinen magneetti esim. sukassa tai reiden kohdalla toiminee aivan mainiosti. Yleisemmin ottaen puettavaa teknologiaa nähdään koruissa yhä enemmän, samoin tatuoinnit ja lävistykset saattavat olla jollain tasolla integroituja tekniikkaan, funktionaalista ihon koristelua. Huomispäivän t-paidat ja lenkkitossut ymmärtävät ympäristöään enemmän kuin älypuhelimet tänään. Ehkä vielä joskus tiedämme mihin Tohtori Crusher tarvitsi kannettavaa bioskanneria.</p>
<p><img class="alignnone" style="border: 1px solid black;" alt="" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/638px-Worf_killed.jpg" width="638" height="480"></p>
			</div><!-- .entry-content -->
	
	<footer class="entry-meta">
								<span class="cat-links">
				Posted in <a href="http://blog.macrowear.com/category/ekosysteemi/" title="View all posts in Ekosysteemi" rel="tag">Ekosysteemi</a>			</span>
			<span class="sep"> | </span>
			
						<span class="tag-links">
				Tagged <a href="http://blog.macrowear.com/tag/atmega/" rel="tag">ATMega</a>, <a href="http://blog.macrowear.com/tag/bioanturi/" rel="tag">bioanturi</a>, <a href="http://blog.macrowear.com/tag/ekosysteemi-2/" rel="tag">ekosysteemi</a>			</span>
			<span class="sep"> | </span>
					
				<span class="comments-link"><a href="http://blog.macrowear.com/2013/10/langattomien-bioantureiden-ekosysteemi/#respond" title="Comment on Langattomien bioantureiden ekosysteemi">Leave a comment</a></span>
		<span class="sep"> | </span>
		
			</footer><!-- #entry-meta -->
</article><!-- #post-242 -->

				
					
<article id="post-208" class="post-208 post type-post status-publish format-standard hentry category-aktiivinen-elektrodi category-eeg-kytkennat category-kyparaintegraatio category-passiivinen-elektrodi">
		<header class="entry-header">
		<h1 class="entry-title"><a href="http://blog.macrowear.com/2013/10/elektrodeista/" title="Permalink to 486 sanaa elektrodeista" rel="bookmark">486 sanaa elektrodeista</a></h1>

				<div class="entry-meta">
			<span class="sep">Posted on </span><a href="http://blog.macrowear.com/2013/10/elektrodeista/" title="6:52 am" rel="bookmark"><time class="entry-date" datetime="2013-10-08T06:52:53+00:00">October 8, 2013</time></a><span class="byline"> <span class="sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://blog.macrowear.com/author/nezeht/" title="View all posts by PH" rel="author">PH</a></span></span>		</div><!-- .entry-meta -->
			</header><!-- .entry-header -->

		<div class="entry-content post_content">
		<h3>Passiivinen elektrodi</h3>
<p>Monissa BCI/EEG laitteissa lääketieteessä käytetään yhä passiivisia elektrodeja. Passiviset elektrodit ovat halpoja, edullisia valmistaa ja helposti huollettavia ja usein jopa kertakäyttöisiä. Haittana on mittaustilanteen vaatimat esivalmistelut, ihoa pitää puhdistaa, kuollut ihosolukko tarvittaessa kuoria ja erikoisgeeliä käytetään johtavuuden parantamiseen ja impedanssin pienentämiseksi. Piirianalyysiä ajatellen kahden passiivisen elektrodi-iho rajapinnan impedanssi on sarjassa differentiaalia vahvistavan instrumentaatiovahvistimen tuloimpedanssin kanssa, eli mitä korkeampi impedanssi sitä vähemmän signaalia tulee instrumentaatiovahvistimelle. Paras signaalitaso saadaan kun impedanssi on matala ja kun elektrodien välinen impedanssi on sama. Ero impedanssien välillä aiheuttaa eritasoista amplitudia ja instrumentaatiovahvistimen CMRR heikkenee eli sen mahdollisuus vaimentaa yhteismuotoista häiriötä vähenee. Yhteismuotoinen häiriö tarkoittaa signaalia, joka tulee differentiaaliasteen&nbsp;molempiin tuloihin ja jos signaalitaso on sama niin erotus on silloin nolla. Impedanssiero aiheuttaa siis eritasoisen amplitudin joka ei tällöin ole yhteismuotoista ja jota instrumentaatiovahvistin ei ilman suodatusta poista.</p>
<h3>Aktiivinen elektrodi</h3>
<p>Aktiivinen elektrodi ei vaadi aikaavieviä esivalmisteluita eikä johtavia geelejä. Aktiivisuus tarkoittaa sitä, että elektrodin sisään on laitettu esivahvistin joka toimii puskurina eli jännitteenseuraajana. Puskuriksi kytketyn operaatiovahvistimen tuloimpedanssi on lähes ääretön (ei päästä virtaa juurikaan läpi) ja lähtöimpedanssi vastaavasti matala. Puskuri toteuttaa ns. impedanssimuunnoksen. Näin aktiivisten elektrodien puskurien lähdöissä on matala ja samansuuruinen impedanssi joka tarjoaa instrumentaatiovahvistimen differentiaalituloihin elektrodien mittausdataa sekä samalla signaalitasolla tulevaa yhteismuotoista häiriötä. Nyt tämän häiriösignaalin erovahvistukseksi saadaan nolla eli häiriöt eliminoituu, sillä differentiaalivahvistinhan vahvistaa vain erot.&nbsp; Impedanssimuunnoksen johdosta signaali voidaan lähettää pidemmän matkaa ilman häiriöitä siitäkin huolimatta, että elektrodien impedanssi voi vaihdella tuhansista ohmeista useisiin megaohmeihin. Hyvänä puskurina toimii esimerkiksi nelikko operaatiovahvistin, TLC27L4, TLC1078 josta signaali viedään joko suodatettuna tai suodattamattomana aktiivisesta elektrodista ulos instrumentaatiovahvistimelle (esim. INA114BP, INA116, INA128, INA129). Toinen syy käyttää aktiivisia elektrodeja on sähköturvallisuus. Koska kuiva-elektrodin impedanssi on hyvin korkea, useita megaohmeja, toimii iho-vahvistin rajapinta myös hyvänä eristimenä.</p>
<p>Eräitä biopotentiaalisia elektrodilaitteiston testejä on suoritettu mm. Negevin autiomaan yllä 1980-luvulta lähtien. Näissä tutkimuksissa hävittäjälentäjän kypärään integroidut elektrodit mittaavat reaktioita erilaisissa lentomanöövereissä. Testien tulosten pohjalta on kehitetty hälytysjärjestelmiä ja automatisoitu lentokoneiden järjestelmiä ennakoimaan ja päättelemään lentäjän tajunnantilan muutokset. Esimerkiksi lentokone siirtyy autopilottitilaan kun lentäjä pyörtyy g-voimien seurauksena, ja pelastaa lentäjän ja mahdolliset matkustajat todennäköiseltä turmalta.</p>
<p><img class="alignnone size-large wp-image-214" alt="aktiivinen" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/aktiivinen1.gif" width="660" height="202"></p>
<p>Yllä kaaviokuva kahdesta aktiivisesta elektrodista joiden signaali syötetään instrumentaatiovahvistimen differentiaalituloihin puskureiden läpi. Elektrodi 1 sisältää instrumentaatiovahvistimen sekä aktiiviset suodattimet.<br>
Kyseinen EEG-mittauselektrodipiiri on ollut testissä Israelin ilmavoimilla.</p>
<p><img class="alignnone size-full wp-image-215" alt="kypärä" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/kypc3a4rc3a4.gif" width="505" height="375"></p>
<p>Havainnollisempi kuva lentäjän kypäräintegraatiosta. Elektrodit 1 ja 2 on pintaliitoskomponenteilla toteutettu joustavalle piirilevylle. Elektrodit on aseteltu kypärään kansainvälisen 10-20-järjestelmän mukaisesti paikoille fp1 ja fp2. A1 ja A2 tai leukaosa toimivat referenssitasona, joka on tehty sähköä johtavasta vaahtomuovista (EPP). Elektrodien johtimista on kytketty referenssijohdin tähän kypärän osaan.</p>
			</div><!-- .entry-content -->
	
	<footer class="entry-meta">
								<span class="cat-links">
				Posted in <a href="http://blog.macrowear.com/category/aktiivinen-elektrodi/" title="View all posts in aktiivinen elektrodi" rel="tag">aktiivinen elektrodi</a>, <a href="http://blog.macrowear.com/category/eeg-kytkennat/" title="View all posts in EEG-kytkennät" rel="tag">EEG-kytkennät</a>, <a href="http://blog.macrowear.com/category/kyparaintegraatio/" title="View all posts in kypäräintegraatio" rel="tag">kypäräintegraatio</a>, <a href="http://blog.macrowear.com/category/passiivinen-elektrodi/" title="View all posts in passiivinen elektrodi" rel="tag">passiivinen elektrodi</a>			</span>
			<span class="sep"> | </span>
			
					
				<span class="comments-link"><a href="http://blog.macrowear.com/2013/10/elektrodeista/#respond" title="Comment on 486 sanaa elektrodeista">Leave a comment</a></span>
		<span class="sep"> | </span>
		
			</footer><!-- #entry-meta -->
</article><!-- #post-208 -->

				
					
<article id="post-193" class="post-193 post type-post status-publish format-standard hentry category-bci category-tulevaisuus">
		<header class="entry-header">
		<h1 class="entry-title"><a href="http://blog.macrowear.com/2013/10/matka_vuoteen_2020/" title="Permalink to Matka vuoteen 2020" rel="bookmark">Matka vuoteen 2020</a></h1>

				<div class="entry-meta">
			<span class="sep">Posted on </span><a href="http://blog.macrowear.com/2013/10/matka_vuoteen_2020/" title="3:11 pm" rel="bookmark"><time class="entry-date" datetime="2013-10-06T15:11:44+00:00">October 6, 2013</time></a><span class="byline"> <span class="sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://blog.macrowear.com/author/nezeht/" title="View all posts by PH" rel="author">PH</a></span></span>		</div><!-- .entry-meta -->
			</header><!-- .entry-header -->

		<div class="entry-content post_content">
		<p>Aivo-Tietokone-Rajapinta. Kuulostipa Futuramalta (kuvassa brain slug).&nbsp; <a href="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/brainslug.jpg" rel="lightbox-0"><img class=" wp-image-200 alignright" style="margin:10px;border:1px solid black;" alt="brainslug" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/brainslug.jpg" width="288" height="230"></a>Liekö tätä edes suomennettu, BCI eli Brain Computer Interface on tutkimusalue ja tulevaisuuden sovellusalue jossa tavoitellaan aivojen solupotentiaalien muuttamista halutuiksi käskyiksi signaalia prosessoivassa laitteessa. Kyseessä on siis suora viestiväylä aivojen ja ulkoisen laitteen välillä. BCI:tä on jo tähän mennessä käytetty vaihtelevalla menestyksellä auttamaan, korjaamaan ja lisäämään ihmisen kognitiivisia ja aisitimotorisia toimintoja. Kaupallisia tuotteita on muutamia jotka kykenevät n. 60-70% tarkkuuteen esim. laitteen ohjauksessa vasemmalle ja oikealle.</p>
<p>BCI rajapinta koostuu mittalaitteesta ja ulkoisesta signaaliprosessointilaitteesta. Mittalaitteella mitataan joko sähköistä potentiaalia (EEG) tai aivojen verenkiertoa HEG eli&nbsp; infrapunamittauksella tai magneettikuvantamisella (fMRI). Ulkoinen prosessointi tapahtuu usein tietokoneella joka edelleen suorittaa mitatun signaalin mukaisesti komentoja.</p>
<p>Neuropalautetta eli neurofeedbackia voidaan käyttää aivojen toiminnan itsesäätelyyn jossa palaute annetaan yleisimmin visuaalisesti tai auditorisesti. Palaute näkyy tietokoneen monitorilla tai kuuluu kuulokkeista. Positiivisen ja negatiivisen palautteen perusteella kohdehenkilö alkaa itsesäätelemään aivoissa tapahtuvia potentiaalieroja ja verenkiertoa. Yksinkertaisin Neuropalautteen koejärjestely syntyy muutamasta elektrodista otsassa, EEG-laitteesta ja monitorilla näkyvästä EEG-käyrästä. Seuraamalla aivosähkökäyrää henkilö voi oppia vaikuttamaan signaalin taajuuteen ja amplitudiin halutessaan.&nbsp; Neuropalaute on eräs tutkimusalue joka ei sinänsä ole osa Brain Computer Interfacea vaan käyttää samoja mittauskeinoja. Neuropalaute on viime aikoihin asti ollut kyseenalaisessa maineessa ja tutkimuksia sen osalta onkin arvosteltu huonoiksi ja rajallisiksi. Tutkimukset tällä saralla on kuitenkin saanut uutta vauhtia. Viimeisen 10 vuoden aikana neuropalautteilla on onnistuttu hoitamaan mm.&nbsp; alkoholismia ns. alfa-theta harjoittelun muodossa. Beta ja SMR harjoittelulla on saatu luotettavasti vaikuttamaan alfa-aaltoihin joka taas on johtanut aineenvaihdunnan hidastumiseen.</p>
<blockquote><p><a name="kuva96"></a>Rotan hippokampuksesta on löydetty soluja, joiden toiminta on eläimen sijainnin funktio. Kun eläin siirretään tai siirtyy eri paikkoihin, eri hippokampussolut aktivoituvat. On väitetty, että hippokampukseen on varastoitu ympäristön kognitiivinen kartta, joka on muotoutuva eli plastinen, sillä kun rotan häkin seinällä olevia paikkatunnistusmerkkejä siirretään, kartta kiertyy. Kartta säilyy myös pimeässä, joten se ei suoraan liity näköön, mutta se ei kuitenkaan näytä olevan topografinen, sillä erillisiin paikkoihin reagoivat solut saattavat sijaita vierekkäin.</p>
<p>BioMag Laboratory hut.fi</p></blockquote>
<h3>Big data, what matters are Brain patterns</h3>
<p>Tuoreimmat tutkimustulokset viittaavat siihen, että tietyt kognitiiviset kyvyt todellakin ovat tiettyjen sähköpotentiaalisten muuttujien funktioita ja nämä potentiaalit esiintyvät eri kognitiivisissa toiminnoissa. Kognitiivisten tieteiden tutkimusryhmät ylläpitävät ns. aktivointitietokantoja joiden datasta pyritään tunnistamaan ja yhdistämään kognitiivisia toimintoja sähköpontentiaaleihin. Tästä tutkimuksesta käytetään nimitystä Coordinated Allocation of Resource Model (CAR). Eräs kaupallinen neuropalautelaite on ns. psykowalkman eli Mind Machine jolla pyritään saamaan aikaiseksi syvän rentoutumisen tilan tai nostamaan vireyttä syöttämällä vilkkuvaa valoa ja ääntä halutun taajuuden mukaan. Näiden laitteiden toimivuudesta voidaan olla montaa mieltä, viihdearvoa ainakin on. Todelliset läpimurrot ovat vielä edessäpäin.</p>
<h3>Kohti tulevaa</h3>
<p>Alla on listattu teknisiä ja tiedeyhteisöllisiä haasteita ja tavoitteita joita nyt ja lähitulevaisuudessa tulee ratkaista jotta saavutetaan toimiva ajatusprosessin ja ulkoisen laitteen välinen kommunikaatiokanava. Lisäksi käydään läpi trendejä ja viiden vuoden ennuste kehityksestä. Tieto on koottu Euroopan Komission Seventh Framework Ohjelmaan osallistuneen BCI&nbsp; European Tutkimusklusterin projektien julkaisuista vuosilta 2007-2013.</p>
<h4>Haasteet, nykypäivä</h4>
<ul>
<li><strong>LUOTETTAVUUS<br>
</strong>Kenen tahansa tulee voida käyttää BCI.tä missä tahansa arkipäivän tilanteessa ajasta riippumatta. Laitteen tulee olla helposti huollettava ja puhdistettava, sen ei tule olla epämiellyttävä eikä hävettävä. Monet tekijät voivat heikentää laitteen suorituskykyä, kuten väsymys, muutokset aivoissa päivien välillä, taustasäteily tai liikkeet kuten nykiminen, kouristukset, levoton liikehdintä, nielemisvaikeudet.</li>
<li><strong>LAATU<br>
</strong>Universaalia BCI-ratkaisua ei ole. Ihminen on yksilö ja ihmisen aivosähkötoiminto on yksilöllistä. BCI joka toimii yhdellä ei toimi välttämättä toisilla.</li>
<li><strong>KAISTANLEVEYS<br>
</strong>BCI-laitteet ovat matalakaistaisia. Käyttäjät voivat antaa tulkattavia signaaleita yhdestä muutamaan ja korkeintaan muutaman sekunnin välein.</li>
<li><strong>MUKAVUUS<br>
</strong>Geelillä kiinnitettävät elektrodit vaativat n. 20 minuutin valmistelun. Ammattilaista tarvitaan usein ja hiukset on pestävä käytön jälkeen. BCI-laitteen päälle ja poiskytkeminen on haastavaa.</li>
<li><strong>LAITE - JA ASIAKASTUKI<br>
</strong>Monikaan maallikko ei voi käyttää BCI:tä ilman ammattilaisen apua. Asiantuntijaa tarvitaan tunnistamaan, hankkimaan, asentamaan, konfiguroimaan, ylläpitämään, korjaamaan ja päivittämään BCI-laitteisto.</li>
<li><strong>OPPIMISPROSESSI<br>
</strong>Monet BCI:t vaativat harjoittelua jolla BCI tunnistaa käyttäjän käskyt. Useat harjoitusparadigmat ovat nykypäivänä huonosti toteutettuja ja käyttäjälle tylsiä.</li>
<li><strong>MONIPUOLISUUS<br>
</strong>Yhtä BCI:tä voidaan käyttää yhteen tarkoitukseen, kuten esimerkiksi lausumaan sanoja käyttäjän puolesta. BCI:en suunnittelussa on jäänyt vähälle huomiolle se mitä käyttäjä todella kaipaisi laitteelta. Jos BCI:n halutaan mahdollistavan useamman ohjelman tai laitteen kontrolloinnin, pitää tarjota mahdollisuus käyttäjärajapintaan jolla voidaan valita haluttu kontrollin kohdeohjelma tai laite.</li>
<li><strong>MIELIKUVA<br>
</strong>Monet tarinat tietokoneiden ja aivojen yhteydestä ovat epätäsmällisiä ja Science fiction usein esittää BCI:t jokseenkin salakavalana ja hämäräna mieleen tunkevana muukalaisena. Kasvava kaupallinen paine saattaa johtaa yritykset tai ihmiset kuvittelemaan liikoja BCI-ratkaisujen tarjoamilta mahdollisuuksilta. Monet BCI laitteistot eivät ole kosmeettisesti kovin miellyttäviä, ja käyttöliittymien käytettävyys saattaa olla heikkoa. Ihminen ei mielellään osta järjestelmää joka vaikuttaa pelottavalta, vaikeakäyttöiseltä, Orwellilaiselta, epäsuositulta, rumalta, hämmentävältä tai tylsältä.</li>
<li><strong>STANDARDOINTI<br>
</strong>BNCI yhteisö tarvitsee suuremman tykin. Tällä hetkellä on liian vähän yhteisiä sopimuksia tiedostoformaateista, tiedonsiirtoprotokollista, eettisistä käytännöistä, mediastrategiasta, bittinopeuksista, termeistä ja määritelmistä sekä mittaristoista vertailla eri BCI järjestelmiä.</li>
<li><strong>INFRASTRUKTUURI<br>
</strong>Lisääntyvät Online tietolähteet saattavat madaltaa esteitä BCI-järjestelmien kehityksessä. Näitä on mm. ohjelmistoalustojen kehitys, parempi dokumentaatio ja kehittäjien vertaistuki, datan prosessointityökalut, haettavat artikkelitietokannat, tapahtumat ja viiteryhmien aktiivisuus.</li>
</ul>
<h4>Tulevaisuus, trendit</h4>
<ul>
<li><strong>LUOTETTAVUUS</strong><br>
Kehittyneet sensorit, korkeaimpedanssiset vahvistimet ja häiriötä suodattavat ohjelmistot voivat mahdollistaa BCI laitteiden toimivan useammassa ympäristössä moitteettomasti. Tutkimusryhmät keskittyvät enemmän kliiniseen validointiin ja BCI integroimiseksi olemassaolevaan laite- ja ohjelmistokantaan, ts. integraatiota viihde-elektroniikkaan, autoteollisuuteen, tehdasjärjestelmiin.</li>
<li><strong>LAATU</strong><br>
Kaksi trendiä voivat kehittää laatua. Parempi signaalinkäsittely vähentää signaalinlukutaidottomuutta ja lyhentää BCI-neuroverkon oppimisaikaa. Hybridi BCI:t tarjoavat käyttäjälle tapoja valita syötteen joka toimii paremmin kuin muut. Lisäksi, tutkimustyö tuottaa tulosta identifioimaan signaalinlukutaidottomuuden syitä, jotka johtavat nopeaan oppimisprosessiin jolla löytää oikeanlainen BCI käyttäjälle.</li>
<li><strong>KAISTANLEVEYS</strong><br>
Parempi signaalinkäsittely, paremmat käyttöliittymät, parempi ympäristö ja kehittyneet syötteet mahdollistavat laajemman kaistanleveyden. Hybridi BCI:t voivat tarjota tarkkuutta, kontekstitietoisuutta ja parempaa virheenkorjausta.</li>
<li><strong>MUKAVUUS</strong><br>
Aktiiviset elektrodit tarvitsevat vähemmän valmisteluita ja säätöä kuin perinteiset passiiviset elektrodit, toisaalta geeliä saatetaan yhä tarvita. Käytännölliset elektrodit, mukaanlukien kuivat ja vesipohjaiset elektrodit voivat merkittävästi vähentää valmisteluaikaa eikä hiusten ja elektrodien pesu ole enää tarpeen. Langattomat BCI:t yleistyvät, erityisesti kaupalliset ratkaisut. Nämä vähentävät ja poistavat epäkäytännölliset kaapelit.</li>
<li><strong>LAITE- ja ASIAKASTUKI</strong><br>
Moni tutkimusryhmä on kehittämässä aputyökaluja. Kaupallinen myynti kasvattaa online-tuen tarvetta. Käytännölliset elektrodit vaativat vähemmän laitteisto- ja asiakastukea sillä niitä ei tarvitse erikseen säätää ja pestä.</li>
<li><strong>OPPIMISPROSESSI</strong><br>
Tutkimusryhmät vähentävät harjoitteluaikaa uusilla signaalinkäsittelytyökaluilla, mukaansatempaavilla ympäristöillä ja paremmalla pelaamisen ja palautteen yhteistöllä. BCI:llä toteutettavat kuntoutukset saattavat nostaa esiin uusia haasteita harjoittamisjaksojen myötä.</li>
<li><strong>MONIPUOLISUUS</strong><br>
Tällä saralla pyritään myös edistymään, tutkimustyötä tehdään sen eteen, että BCI mahdollistaa useamman kuin yhden asian tai sovelluksen käyttämisen.</li>
<li><strong>MIELIKUVA</strong><br>
Erittäin suuri merkitys ja suunta on designilla jota ajaa eteenpäin kaupalliset intressit. Mielen liittäminen koneeseen tulee saamaan mediahuomiota ja hypetyksen mahdollisuus kasvaa.</li>
<li><strong>STANDARDOINTI JA INFRASTUKTUURI</strong><br>
Uudet tiedostoformaatit, termit ja määritelmät, bittinopeuksien raportoinnin ohjeistukset, ohjelmistoalustat, ja muut kontribuutiot tullaan julkaisemaan mutta implementaatiot antavat vielä odottaa itseään. Johtokunnat ja ohjausryhmät joissa on mukana arvostettuja tutkijoita ehdottavat ja kehittävät uusia standardeja, suuntaviivoja, työkaluja ja muita resursseja.</li>
</ul>
<h4>Vuosi 2020</h4>
<ul>
<li><strong>LUOTETTAVUUS JA LAATU</strong><br>
BCI lukutaidottomuutta ei ole vielä täysin selvitetty. Kuitenkin signaalipatternien henkilöriippumattomuutta on paremmin hallittua tutkimustyön ansiosta jolla kyetään identifioimaan yksilötekijät. Hybridi BCI:llä voidaan siirtyä sovelluksesta ja laitteesta toiseen.</li>
<li><strong>KAISTANLEVEYS</strong><br>
Tällä saralla ei synny vielä merkittävää läpimurtoa.&nbsp; Älykkäämmät, virhesietoisemmat ja kontekstitietoiset työkalut parantavat kaistanleveyttä kuitenkin nykyisestä.</li>
<li><strong>MUKAVUUS</strong><br>
Laitteet tulevat huomattavasti mukavammaksi käyttää. Uudenlainen "headwear" integroituu helposti ja saumattomasti vaatetukseen ja muuhun päähän puettaviin laitteisiin. Täysin huomaamattomaksi ei BCI vielä saada.</li>
<li><strong>LAITE- JA ASIAKASTUKI</strong><br>
Odotukset ovat ristiriitaiset. Eri kehityshaarat vähentävät asiantuntijoiden apua. Jo viiden vuoden kuluttua verkossa tulee olemaan paljon nykyistä enemmän materiaalia jotka tukevat sekä asiantuntijoita, että loppukäyttäjiä. Peliteollisuus on ensimmäisiä kaupallisia alueita joissa ei tulla tarvitsemaan asiantuntija-apua. BCI-laitteesta tulee jonkinasteinen pelikonsolin ohjauskontrolli. Tukipalvelut kuitenkin säilyvät, erityisesti potilaille jotka käyttävät lääketieteellisiä BCI järjestelmiä.</li>
<li><strong>OPPIMISPROSESSI</strong><br>
Kaksi eri trendiä jatkuu. Ensinnäkin, BCI joustavuus kehittyy siten, että voidaan valita laitteisto joka ei vaadi harjoittelua. Toiseksi, laitteisto jonka kanssa vaaditaan harjoittelua, toteuttaa harjoittelun nopeasti kehittyneen signaaliprosessoinnin ansiosta.</li>
<li><strong>MONIPUOLISUUS</strong><br>
Tämä osa-alue on kaikkein epävarmin ennustaa. Tulee olemaan helpompaa siirtyä ohjelmistojen välillä ja adaptoida BCI laitteen avulla uusia ohjelmia hallintaansa. Mutta on vielä ennenaikaista arvioida tuleeko aivosähkömittauksesta todella toimiva ratkaisu potilaiden kuntoutukseen. Jos tulee niin tämä lisää merkittävästi BCI:n käyttötapauksia.</li>
<li><strong>MIELIKUVA</strong><br>
Valitettavasti, monet ihmiset eivät tiedä BCI:stä tai odotuksen ovat epärealistisia ja ylinegatiivisia. Science fictionin, ja ehkä myös journalismin esittämä virheellinen ja negatiivinen kuva säilyy yhä muuttumattomana. Riskinä on, että vääristely aiheuttaa ylihypetystä, kuplan synnyttämistä tärkeästä aihealueesta. Keinotekoisen kuplan puhkeaminen taas johtaisi takaiskuun BCI tutkimustyössä, samoin kuten kävi neurofeedback tutkimuten kanssa 70-luvulta alkaen. Tämä lamaannuttaisi julkisen rahoituksen, kaupallisen myynnin ja tutkimustyön.</li>
<li><strong>STANDARDIT</strong><br>
Seuraavan viiden vuoden aikana standardointityön odotetaan olevan kohtuullista. Useita teknisiä standardeja määritellään, mukaanlukien raportoinnin ohjeistus. Eettiset ohjessäännöt edistyvät myös. Erimielisyys BCI:n tarkasta määritelmästä saattaa kuitenkin kasvaa ja tätä pyritään vahvasti ratkomaan BCI yhteisöelimissä.</li>
<li><strong>INFRASTRUKTUURI</strong><br>
Myös tämän osalta odotetaan kohtuullista edistystä. Monet ohjelmistot ja työkalut kehittyvät, samoin kehittyy verkon online-tuki joka ohjaa ihmisiä käyttämään juuri sopivia järjestelmiä ja auttavat vianselvityksessä sekä asennuksissa. Infrastruktuurin kehitys riippuu hyvin paljon tutkimustyön ulkopuolisten toimijoiden rahoituksesta.</li>
</ul>
<p><a href="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/conan-year2000.jpg" rel="lightbox-1"><img class="alignnone size-full wp-image-202" alt="conan-year2000" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/conan-year2000.jpg" width="200" height="200"></a></p>
<h3>Mahdollisuudet</h3>
<p>Jos Brain-Computer-Interface-järjestelmillä onnistutaan tuottamaan vakaita ja luotettavia toiminnallisia parannuksia, niin mahdollisten sovellusten ja loppukäyttäjien määrä tulee kasvamaan dramaattisesti.<br>
BCI:n käyttäminen saattaa lisätä motorista plastisuutta eli muovautumista ja siten auttaa aivoja uudelleenkartoittamaan (remap) sisäisiä rakenteitaan. Aivokudos säilyttää rakenteellisen ja toiminnallisen muovautuvuutensa läpi koko ihmiselämän. Hermosolut eivät jakaannu, mutta niiden väliset kontaktit muuttuvat solujen omasta aktiivisuudesta riippuvalla tavalla. Me vaikutamme aivojemme rakenteeseen oman toimintamme kautta, ja siten voidaan sanoa, että aivot rakentavat itse itseään.&nbsp; BCI-teknologiaa voidaan käyttää analysoimaan muutoksia aivoissa esimerkiksi aivohalvauksen aikana ja hyödyntää tätä dataa luomaan sopivaa kuntoutusta ja terapiaa.</p>
<p>BCI-anturien on on oltava nykyistä huomaamattomampia. Plug-and-play-tyylinen anturiteknologia nopeuttaisi BCI-teknologian leviamistä. Ala onkn siirtymässä päälle puettaviin malleihin, kuten lippalakkeihin, laseihin tai kuulokkeisiin ja muihin päähän laitettaviin asioihin ja vaatetukseen. Laitteisto kehittyy niin, että vahvistinpiirien antama signaalin laatu tällaisissa päällepuettavissa kuivaelektrodeissa tulee yhtä hyväksi kuin lääketieteellisissä geelipohjaisissa elektrodeissa. Tämänkaltaiset wearable-laitteistot ilmaantuvat markkinoille merkittävän kasvun saattelemana seuraavan viiden vuoden kuluessa.</p>
			</div><!-- .entry-content -->
	
	<footer class="entry-meta">
								<span class="cat-links">
				Posted in <a href="http://blog.macrowear.com/category/bci/" title="View all posts in BCI" rel="tag">BCI</a>, <a href="http://blog.macrowear.com/category/tulevaisuus/" title="View all posts in tulevaisuus" rel="tag">tulevaisuus</a>			</span>
			<span class="sep"> | </span>
			
					
				<span class="comments-link"><a href="http://blog.macrowear.com/2013/10/matka_vuoteen_2020/#respond" title="Comment on Matka vuoteen 2020">Leave a comment</a></span>
		<span class="sep"> | </span>
		
			</footer><!-- #entry-meta -->
</article><!-- #post-193 -->

				
					
<article id="post-158" class="post-158 post type-post status-publish format-standard hentry category-filtterit category-kaistanpaast category-signaalit category-suodatin category-taajuusvaste category-teoria tag-desibeli tag-kaistanpaasto tag-laplace tag-siirtofunktio tag-suodattimet">
		<header class="entry-header">
		<h1 class="entry-title"><a href="http://blog.macrowear.com/2013/09/kaistanpaasto-ja-suodattimet/" title="Permalink to Kaistanpäästön valinta ja suodattimet" rel="bookmark">Kaistanpäästön valinta ja suodattimet</a></h1>

				<div class="entry-meta">
			<span class="sep">Posted on </span><a href="http://blog.macrowear.com/2013/09/kaistanpaasto-ja-suodattimet/" title="9:55 pm" rel="bookmark"><time class="entry-date" datetime="2013-09-30T21:55:59+00:00">September 30, 2013</time></a><span class="byline"> <span class="sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://blog.macrowear.com/author/nezeht/" title="View all posts by PH" rel="author">PH</a></span></span>		</div><!-- .entry-meta -->
			</header><!-- .entry-header -->

		<div class="entry-content post_content">
		<p>Biopotentiaaliset signaalit löytyvät taajuusalueelta DC..10kHz. Ideaalisissa olosuhteissa biopotentiaalivahvistin tarjoaa laajakaistaisen vasteen joka mahdollistaa monen eri biosähköisen ilmiön mittamisen.</p>
<p>Käytännössä kuitenkin epäideaalisuudet asettaa rajoitteita ja hankaloittaa toteutusta. Epäideaalisuuksia on mm. yhteismuotoiset häiriöt ja potentiaalit, elektrodien polarisoituminen, ihon terminen vastus. Biosähkömittalaitteen taajusvaste onkin säädettävä tietylle halutulle taajuusspektrille. Spektrianalyysi on yleinen tapa määrittää kaistanleveys prosessoitavalle signaalille. Tässä on jo tiedossa EEG ja EMG taajuusalue mutta käyn kuitenkin läpi miten spektrianalyysi käytännössä toimii tilanteessa missä alue on hieman tuntemattomampi.</p>
<p>Spektrianalyysissä evaluoidaan signaalissa esiintyvien korkeiden- ja matalien taajuuksien komponenttien kesto. Tässä esitetään eräs nopea tapa arvioida rajataajuudet. Korkeimman taajuuskomponentin kesto arvioidaan signaalista pienimmän nousuajan tai laskuajan mukaan. Matalimman taajuskomponentin kesto taas määritellään mittaamalla signaalin matalimpaan tason kestoaika.</p>
<p>Alla oleva kuva esittää nisäkkään sydämen tahdistinsolujen sisäistä mitattua potentiaalieroa sinussolmukkeessa, eli ns. sinus-rytmiä.</p>
<p><img class="alignnone size-full wp-image-162" style="border:1px solid black;" alt="sinus" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/sinus.gif" width="577" height="256"></p>
<p>Kuvassa korkeimman taajuuskomponentin laskun kesto eli thf=75ms ja matalimman tason aika eli tlf=610ms. Nyt asetetaan sallituksi vaimennukseksi -3dB ja sallitaan 1% särö. Biopotentiaalisille signaaleille kirjallisuudessa sallitaan maksimissaan 5% särö. &nbsp;Seuraavaksi lasketaan metodia käyttäen rajataajuudet:<br>
ylipäästön rajataajuus =&lt; 0.0016/610ms = 0,0026Hz<br>
alipaastön rajataajuus =&lt;3.1/75ms = 41,3Hz<br>
Saadaan, että kaistanpäästösuodin pitää sallia taajuudet 0,0026Hz..41,3Hz välillä -3dB (puolen tehon piste) ja 1% säröllä.</p>
<p>EEG signaalien taajuusalue on ennestään tiedossa joten spektrianalyysejä sen suhteen ei tarvita.</p>
<p>Delta waves 0.5–4 Hz<br>
Theta waves 4–7.5 Hz<br>
Alpha waves 7.5–13 Hz<br>
Low beta waves 13–15 Hz<br>
Beta waves 15–20 Hz<br>
High beta waves 20–38 Hz<br>
Gamma waves 38–42 Hz<br>
Visual evoked potential (VEP) 1–300 Hz<br>
Auditory evoked potential (AEP) 100 Hz–3 kHz</p>
<p>EMG signaalien taajuusalue: 2–500 Hz<br>
EMG Motorisen yksikön taajuusalue: 5 Hz–10 kHz<br>
EMG, yksittäisen lihassäikeen taajuusalue: 500 Hz–10 kHz</p>
<h3>Vahvistus ja taajuusvaste</h3>
<p>Taajuusvasteessa tärkeä suure on puolen tehon rajataajuus eli se taajuus jolla teho on laskenut puoleen maksimitehosta. Puolen tehon rajataajuus on siis: P(ωc) = 1/2 * Pmax.<br>
Biopotentiaalisignaalin amplitudi on muutamasta mikrovoltista muutamaan millivolttiin. Jännite on niin pieni, että se pitää vahvistaa tasolle joka sopii tallennus/näyttölaitteelle. Vahvistus pitää tällöin olla n. 1000 kertainen tai enemmän. Vahvistus ja vaimennus kuvataan yleensä desibeleinä. Lineaarinen tehonvahvistus saadaan laskettua yhtälöllä: G(ω) = 10lg(p(ω)/Pmax) dB. Jos käsitellään jännitteitä kuten biopotentiaalimittauksissa niin puolen tehon rajataajuuden yhtälöksi saadaan:&nbsp; Gain(dB) = 20 log10(linear gain), jossa lineaarinen vahvistus on jännitevahvistuksessa tulo- ja lähtöjännitteiden suhde: Vout/Vin, tämä yhtälö toimii myös kun käsitellään virtavahvistusta. Edessä on kerroin 20, koska teho on verrannollinen jännitteen ja virran tehollisarvon neliöön. &nbsp;Biopotentiaalisignaalin vahvistimen kaistanleveys on oltava vahvistava kaikilla halutuilla mitattavilla taajuuksilla. Kaistanleveys on suodattimen rajataajuuksien välinen alue. Rajataajuuden kohdassa eli puolen tehon pisteessä signaalin (jännitteen) amplitudi on 0,7071 kertainen maksimista, ja teho puolet maksimitehosta: 1/sqrt(2)=0,707^2 = 0,5. Toisin sanoen, kun teho on puolittunut, on jännite 70,7%, niin ollaan puolen tehon pisteessä: -3dB = 10lg(0,5)&nbsp;&nbsp;= 20 lg10(0,707). Kaistanpäästöäsuodatinta käsitellessä puhutaan puolen tehon kaistanleveydestä eli 3dB kaistanleveydestä, jota ao. kuva esittää.</p>
<p><img class="alignnone size-full wp-image-172" alt="bandpassfilter" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/bandpassfilter.gif" width="411" height="305"></p>
<h3>Suodatin</h3>
<p>Matemaattisesti tarkasteltuna suodatin on lineaarinen systeemi jossa x(t) on tulosignaali ja y(t) on lähtösignaali.&nbsp;Laplace-muunnoksen avulla saadaan yhtälö:&nbsp;Y(s) = H(s)X(s)</p>
<p><img class="alignnone size-full wp-image-171" alt="suodatin" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/suodatin.gif" width="255" height="136"><br>
missä:<br>
Y(s) = L{y(t)} = lähtösignaali taajuusalueessa<br>
X(s) = L{x(t)} = tulosignaali taajuusalueessa<br>
H(s) = suodattimen siirtofunktio<br>
s= kompleksinen taajuusmuuttuja =&nbsp;σ + jω</p>
<p>Passiiviset suodattimet eivät tarvitse erillistä käyttöjännitettä, ne on tehty yksinkertaisista komponenteista jotka eivät vahvista virtaa tai jännitettä. Passiivisten suodattimien tuottama kohina biosignaaleihin rajoittuu resistiivisten komponenttien tuottamaan "lämpökohinaan". Passiivisia suodattimia voidaan hyvin käyttää laitteissa jotka vaativat suurempiakin virtoja ja jännitteitä. Tästä huolimatta ne eivät sovellu laitteistoille joiden suodatinvaatimukset tekisivät passiivisilla komponenteilla rakennetun piirin hankalaksi ja epäkäytännölliseksi. Aktiivinen suodatin käyttää operaatiovahvistinta yhdessä vastusten ja kondensaattoreiden kanssa, lisäksi operaatiovahvistimellä voi simuloida kelaa. Useamman asteen aktiivisia suodatinpiirejä voi toteuttaa helposti.<br>
Suodatinpiireissä voidaan käyttää valmiita ohjelmia tarjoamaan sopivaa topologiaa ja tukemaan suunnittelussa. Suodatinrakenteen valinnassa kysymys on kahdesta asiasta:</p>
<ol>
<li>Suodattimen vaste: Millainen tulee siirtofunktion olla?</li>
<li>Suodattimen topologia: Miten hyvin suodattimen implementointi sopii suunniteltavaan laitteeseen?</li>
</ol>
<h3>Käytetyimmät suodattimet ja niiden karakterisointi</h3>
<p>Suodattimen vaste tarkoittaa suodattimen siirtofunktion muotoa. Vaikka taajuusalue on tiedossa jonka mukaan piirrämme mielessämme hienon suorakulmiomuotoisen päästösuodinfunktion kuvaajan niin todellisuudessa suodattimet eivät muodosta täydellistä siirtofunktiota. Jos asiaa syvällisesti lähtisi tutkimaan niin päädyttäisiin Heisenbergin epätarkkuusperiaatteeseen ja luonnon hämmästyttävään tapaan noudattaa aina ja kaikkialla pienimmän vaikutuksen periaatetta. Keskityn kuitenkin käsittelemään asiaa riittävästi, ja ehkä juurikin sopivasti. Jotta suodattimen siirtofunktio piirtäisi täydellisen suorakulmion pitäisi se olla rakennettu äärettömän monesta vahvistimesta, vastuksesta ja kondensaattorista. Vaimon mukaan minulla sattuu olemaan äärettömän monta kondensaattoria kotona mutta muista komponenteista pulaa. Tästä johtuen todelliset suodattimet toteuttavat riittävän hyvän taajuusalueen käyttäytymisen approksimaation täydellisestä siirtofunktiosta. Suodattimien asteluku on yleensä sama kuin kelojen ja kondensaattorien yhteenlaskettu lukumäärää. Tämä asteluku näkyy myös Laplace yhtälössä eli siirrtofunktiossa kompleksimuuttujan s:n tai omegan korkeimpana potenssina. Laajakaistainen kaistanpäästöäsuodatin on yleensä aina toisen asteen siirtofunktio, sillä siinä on peräkkäin ali- ja ylipäästösuodatin.</p>
<p>Tunnetuimpia ja käytetyimpiä suodatintyyppejä ja samalla matemaattisesti siirtofunktioita ovat: Butterworth, Chebyshev, Bessel. Jokaisella näistä on vahvuutensa ja heikkoutensa. Laitesuunnittelussa suodatintyypin valinta onkin usein kompromissi. Butterworthin vaste on lähes tasainen päästöalueella ja sen jälkee "valuu" tasaisesti alas. Butterworthissa ei ole juurikaan rippeliä päästöalueella eikä estoalueella. Näistä syistä moni suunnittelija pitääkin Butterworthia parhaana kompromissina vaimennuksen ja vaihevasteen välillä.<br>
Butterworth onkin yleisimmin käytetty biologisten signaalien suodattamisessa. Bessel suodatin tarjoaa toki paremman vaihesiirron, koska se on lineaarinen.<br>
Alla siirtofunktioiden käyttäytyminen taajuustasossa ja aikatasossa:</p>
<ul>
<li>Chebyshev:
<ul>
<li>Taajuustaso: tasainen aaltoilu, jyrkkä estokaista</li>
<li>Aikataso: vaihe: heikko, viive: heikko</li>
<li>Käytetään, kun jyrkkyys estokaistalla on tärkein ominaisuus</li>
</ul>
</li>
<li>Butterworth:
<ul>
<li>Taajuustaso: pehmeä aaltoilu, estokaista kohtalainen</li>
<li>Aikataso: vaihe: kohtalainen, viive: kohtalainen</li>
<li>Yleisin suodintyyppi, hyvä ”kompromissi” kaikilta ominaisuuksiltaan</li>
</ul>
</li>
<li>Bessel:
<ul>
<li>Taajuustaso: aaltoilu erittäin pehmeää, estokaista: heikko</li>
<li>Aikataso: vaihe: erittäinen tasainen, viive: erittäin tasainen</li>
<li>Käytetään, kun tasaiset askelvaste- ja vaiheominaisuudet ovat tärkeimmät</li>
</ul>
</li>
</ul>
<p>Alla oleva Boden kuvaaja havainnollistaa edellämainittujen kolmen suodatinsiirtofunktion käyttäytymisen. Kuvassa amplitudi- ja vaihevasteet, mittauksessa käytetty neliasteisia suodattimia, -3dB ja rajataajuus 30Hz.</p>
<p><img class="alignnone size-full wp-image-166" alt="suodattimet" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/suodattimet.gif" width="567" height="360"></p>
<h3>Suodattimien topologia</h3>
<p>Karakterisointi vastasi suodatinvalinnan ensimmäiseen kysymykseen. Seuraavassa tarkastellaan vastausvaihtoehtoja suodattimen rakenteeseen, millaisia suodatintopologioita on.</p>
<ol>
<li>Sallen-Key</li>
<li>Multiple-feedback</li>
<li>State-variable</li>
<li>Impedanssikonvertteri</li>
</ol>
<p>jatkuu tästä...kts. MAX274 ja MAX275, state-variable, Aktiivisuotimet piiriteoria.</p>
			</div><!-- .entry-content -->
	
	<footer class="entry-meta">
								<span class="cat-links">
				Posted in <a href="http://blog.macrowear.com/category/filtterit/" title="View all posts in filtterit" rel="tag">filtterit</a>, <a href="http://blog.macrowear.com/category/kaistanpaast/" title="View all posts in kaistanpääst" rel="tag">kaistanpääst</a>, <a href="http://blog.macrowear.com/category/signaalit/" title="View all posts in signaalit" rel="tag">signaalit</a>, <a href="http://blog.macrowear.com/category/suodatin/" title="View all posts in suodatin" rel="tag">suodatin</a>, <a href="http://blog.macrowear.com/category/taajuusvaste/" title="View all posts in taajuusvaste" rel="tag">taajuusvaste</a>, <a href="http://blog.macrowear.com/category/teoria/" title="View all posts in teoria" rel="tag">teoria</a>			</span>
			<span class="sep"> | </span>
			
						<span class="tag-links">
				Tagged <a href="http://blog.macrowear.com/tag/desibeli/" rel="tag">desibeli</a>, <a href="http://blog.macrowear.com/tag/kaistanpaasto/" rel="tag">kaistanpäästö</a>, <a href="http://blog.macrowear.com/tag/laplace/" rel="tag">laplace</a>, <a href="http://blog.macrowear.com/tag/siirtofunktio/" rel="tag">siirtofunktio</a>, <a href="http://blog.macrowear.com/tag/suodattimet/" rel="tag">suodattimet</a>			</span>
			<span class="sep"> | </span>
					
				<span class="comments-link"><a href="http://blog.macrowear.com/2013/09/kaistanpaasto-ja-suodattimet/#respond" title="Comment on Kaistanpäästön valinta ja suodattimet">Leave a comment</a></span>
		<span class="sep"> | </span>
		
			</footer><!-- #entry-meta -->
</article><!-- #post-158 -->

				
					
<article id="post-151" class="post-151 post type-post status-publish format-standard hentry category-opamps category-teoria tag-hh tag-hill tag-horowitz">
		<header class="entry-header">
		<h1 class="entry-title"><a href="http://blog.macrowear.com/2013/09/hill-ja-horowitz/" title="Permalink to Hillin ja Horowitzin kanssa kahvilla" rel="bookmark">Hillin ja Horowitzin kanssa kahvilla</a></h1>

				<div class="entry-meta">
			<span class="sep">Posted on </span><a href="http://blog.macrowear.com/2013/09/hill-ja-horowitz/" title="10:13 pm" rel="bookmark"><time class="entry-date" datetime="2013-09-28T22:13:36+00:00">September 28, 2013</time></a><span class="byline"> <span class="sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://blog.macrowear.com/author/nezeht/" title="View all posts by PH" rel="author">PH</a></span></span>		</div><!-- .entry-meta -->
			</header><!-- .entry-header -->

		<div class="entry-content post_content">
		<p>Törmäsin Hillin ja Horowitzin tunnettua Art of Electronics kirjaa (1989 painos) lukiessani heidän laatimaansa kahteen operaatiovahvistimen "kultaiseen sääntöön". En tiedä onko näille olemassa mitään sen erityisempää nimitystä suomenkielessä. Silloin tällöin kirjallisuudesta, sen lajista riippumatta, löytyy helmiä ja tässä mielestäni yksi sellainen. Nämä "kultaiset säännöt" ovat samoja perusasioita mitä luennoillakin on mainittu mutta nostan ne tähän vielä kirjan esittämällä tavalla, suomennettuna tosin:</p>
<blockquote><p>&nbsp;Tässä ovat yksinkertaiset säännöt jotka soveltuvat takaisinkytketyn operaatiovahvistimen kanssa työskentelyyn. Nämä ovat riittävän hyvät lähes kaikkeen mitä ikinä tuletkaan tekemään.<br>
Ensinnäkin, operaatiovahvistimen vahvistus on niin suuri, että &nbsp;millivoltin murto-osa tulojen välillä heittää lähdön yli järjellisen alueen, joten me voimme unohtaa tämän pienen jännitteen ja laatia kultaiset säännöt:</p>
<ol>
<li>Lähtöjännite yrittää tehdä kaiken mahdollisen saadakseen tulonapojen välisen jännitteen nollaan.</li>
<li>Tuloihin ei tule virtaa</li>
</ol>
<p>Yksi tärkeä huomio: sääntö nro 1 ei tarkoita, että operaatiovahvistin muuttaisi tulojen jännitteitä, sitä se ei voi tehdä. Kuinka se voisikaan, ja miten se olisi enää yhdenmukainen säännön 2. kanssa. Operaatiovahvistin ei muuta jännitettä mutta sen sijaan se "katsoo" tulonapoihin ja keikauttaa lähtöjännitettä siten, että takaisinkytkentä saa tulonapojen jännite-eron nollaan (jos mahdollista). &nbsp;Näillä kahdella säännöllä pärjää pitkälle.</p></blockquote>
<p>Nämä kaksi sääntöä johtavat mielenkiintoisiin päätelmiin, joista ehkä mainioin on negatiivisesti takaisinkytketyn operaatiovahvistinpiirin analyysin yksinkertaistaminen:</p>
<ol>
<li>poista operaatiovahvistin piiristä kokonaan</li>
<li>määrittele, että V+ = V-</li>
<li>Ratkaise</li>
</ol>
<p><img class="alignnone  wp-image-155" style="border:0;" alt="yksinkertaistus" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/yksinkertaistus1.gif" width="528" height="113"></p>
<p>Tiettävästi tämä operaatiovahvistinpiirin redusointi resistiiviseksi jännitteenjakokytkennäksi on jo ennen H&amp;H kultaisia sääntöjä ollut elektroniikkainsinöörien työkalulaatikossa. Asian esitystapa on viehättävä.<br>
Jännitteenjakopiiristä saadaankin hyvin yksinkertaisesti (Vin - V-)/R1 = (V- - Vout)/R2. Ja kun V- = 0 niin Vout =&nbsp;(-R2/R1 ) Vin<br>
Kultaiset säännöt ovat voimassa kun kaksi ehtoa toteutuu: takaisinkytkentä on negatiivinen ja vahvistin ei ole kyllästynyt.</p>
<p>&nbsp;</p>
			</div><!-- .entry-content -->
	
	<footer class="entry-meta">
								<span class="cat-links">
				Posted in <a href="http://blog.macrowear.com/category/opamps/" title="View all posts in opamps" rel="tag">opamps</a>, <a href="http://blog.macrowear.com/category/teoria/" title="View all posts in teoria" rel="tag">teoria</a>			</span>
			<span class="sep"> | </span>
			
						<span class="tag-links">
				Tagged <a href="http://blog.macrowear.com/tag/hh/" rel="tag">H&amp;H</a>, <a href="http://blog.macrowear.com/tag/hill/" rel="tag">Hill</a>, <a href="http://blog.macrowear.com/tag/horowitz/" rel="tag">Horowitz</a>			</span>
			<span class="sep"> | </span>
					
				<span class="comments-link"><a href="http://blog.macrowear.com/2013/09/hill-ja-horowitz/#respond" title="Comment on Hillin ja Horowitzin kanssa kahvilla">Leave a comment</a></span>
		<span class="sep"> | </span>
		
			</footer><!-- #entry-meta -->
</article><!-- #post-151 -->

				
					
<article id="post-116" class="post-116 post type-post status-publish format-standard hentry category-uncategorized">
		<header class="entry-header">
		<h1 class="entry-title"><a href="http://blog.macrowear.com/2013/09/back-to-the-basics-operaatiovahvistimista/" title="Permalink to Back to the basics - operaatiovahvistimista" rel="bookmark">Back to the basics - operaatiovahvistimista</a></h1>

				<div class="entry-meta">
			<span class="sep">Posted on </span><a href="http://blog.macrowear.com/2013/09/back-to-the-basics-operaatiovahvistimista/" title="11:04 pm" rel="bookmark"><time class="entry-date" datetime="2013-09-27T23:04:41+00:00">September 27, 2013</time></a><span class="byline"> <span class="sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://blog.macrowear.com/author/nezeht/" title="View all posts by PH" rel="author">PH</a></span></span>		</div><!-- .entry-meta -->
			</header><!-- .entry-header -->

		<div class="entry-content post_content">
		<p>Bioanturien ja ylipäätään solujen biopotentiaalin mittaukseen tai vaikuttamiseen tarkoitettujen laitteiden vahvistinpiirit perustuvat lähes poikkeuksetta operaatiovahvistimiin. Operaatiovahvistimen lähtö on suoraan verrannollinen &nbsp;sen tulojen väliseen jännite-eroon. &nbsp;Ei-invertoivan operaatiovahvistimen tulot ja lähtö ovat samassa vaiheessa, kun taas invertoiva vahvistin tuottaa lähtöön signaalin joka on 180° vaihe-erossa tulojen kanssa, tämä vaihe-ero näkyy yhtälössä (-)-merkkinä, kääntävänä.</p>
<h3>Invertoivan vahvistuskerroin</h3>
<p>Vahvistuskertoimen yhtälön johtaminen omin sanoin piirianalyysin keinoin.</p>
<p><a href="http://macrowear.com/blog/wp-content/uploads/2013/09/invertoiva.gif" rel="lightbox-0"><img class="size-medium wp-image-117 alignnone" style="border:1px solid black;" alt="invertoiva" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/invertoiva.gif" width="300" height="199"><br>
</a><em>invertoiva opearaatiovahvistin yksinkertaistettuna ilman käyttöjännitekytkentöjä.</em></p>
<p>Jännite Vin syötetään vastuksen Rin yli (-) tuloon. Vastus Rf on takaisinkytkentävastus jonka kautta vahvistimen lähtö kytkeytyy takaisin invertoivaan tuloon. Ei-invertoiva tulo on kytketty maahan.</p>
<p>Negatiivinen takaisinkytkentä muuttaa (-) -tulon jännitettä, sillä se on tulon jännitteen ja takaisinkytkentäjännitteen summa. Tätä kytkentäpistettä sanotaan summapisteeksi ja kuvassa sitä symboloi A. Operaatiovahvistimessa tulojen jännitteet pyrkivät samoiksi, näin ollen summapistettä A voi ajatella myös maahan kytketyksi &nbsp;ns. "virtuaalimaa".</p>
<p>Ideaalisella operaatiovahvistimella on ääretön impedanssi, joten voidaan päätellä virran olevan nolla. Invertoivaan tuloon ei tule yhtään virtaa eikä näin ollen myöskään lähde. Kirchhoffin virtalain mukaan&nbsp;pisteeseen tulleiden ja siitä poistuvien virtojen summa on nolla, joten summapisteen A virta on nolla, jolloin:<br>
<img style="border:0;" alt="CodeCogsEqn" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/codecogseqn.gif" width="66" height="18"><br>
Määritellään virrat vielä ohmin lain mukaan:<br>
<img style="border:0;" alt="CodeCogsEqn (1)" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/codecogseqn-1.gif" width="157" height="41"><br>
sijoitetaan aikaisempaan yhtälöön ja ratkaistaan Vout:<br>
<img style="border:0;" alt="CodeCogsEqn (2)" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/codecogseqn-2.gif" width="109" height="38"><br>
Jossa G on jännitevahvistus joka tulee vastuksien suhteesta Rf/Rin<br>
<img style="border:0;" alt="CodeCogsEqn (3)" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/codecogseqn-3.gif" width="99" height="16"></p>
<h3></h3>
<h3>Ei-invertoivan vahvistuskerroin</h3>
<p><img class="alignnone size-medium wp-image-132" style="border:1px solid black;" alt="ei_invertoiva" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/ei_invertoiva.gif" width="300" height="130"><br>
ei invertoivan periaate,&nbsp;&nbsp;tulojännite Vin lisätään suoraan ei-kääntävään positiiviseen tuloon.<br>
Tulo ja lähtö pysyvät samanmerkkisenä, joko kuvan esittämällä tavalla positiivisena tai sitten negatiivisena.</p>
<p><img class="alignnone size-medium wp-image-133" style="border:1px solid black;" alt="ei_invertoiva_kytkenta" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/ei_invertoiva_kytkenta.gif" width="300" height="222"><br>
<em>ei-invertoiva opearaatiovahvistinkytkentä</em></p>
<p>Lähes samalla blackbox analyysillä saadaan johdettua vahvistuskertoimen yhtälö kuin invertoivassakin.<br>
<img class="alignnone size-full wp-image-135" style="border:0;" alt="CodeCogsEqn (5)" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/codecogseqn-5.gif" width="234" height="51"><br>
Ei-invertoiva vahvistin ei käännä etumerkkiä joten:<br>
<img class="alignnone size-full wp-image-137" style="border:0;" alt="CodeCogsEqn (7)" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/codecogseqn-7.gif" width="229" height="43"><br>
Josta:</p>
<p><img class="alignnone size-medium wp-image-138" style="border:0;" alt="CodeCogsEqn (8)" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/codecogseqn-8.gif" width="300" height="38"><br>
ja vahvistus on siten:</p>
<p><img class="alignnone size-full wp-image-139" style="border:0;" alt="CodeCogsEqn (9)" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/codecogseqn-9.gif" width="98" height="40"><br>
Ei-invertoivan vahvistimen vahvistus on aina vähintään 1 tai suurempi.</p>
<h3></h3>
<h3>Puskuri</h3>
<p>Jos vastuksen Rf resistanssi lähenee nollaa tai jos Rin resistanssi lähenee ääretöntä niin vahvistus lähenee yhtä:<br>
<img class="alignnone size-full wp-image-140" style="border:0;" alt="CodeCogsEqn (10)" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/codecogseqn-10.gif" width="292" height="41"></p>
<p>Eli kun Rf/Rin = 0, niin saadaan jännitteenseuraajakytkentä eli puskuri sillä vahvistus on 1.<br>
<img class="alignnone size-full wp-image-141" style="border:1px solid black;" alt="voltagefollower" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/voltagefollower.jpg" width="271" height="249"><br>
Kytkentä tarjoaa suuren sisääntuloimpedanssin, ts. ei kuormita signaalilähdettä. Kytkentä tarjoaa myös pienen lähtöimpedanssin jolloin voidaan ajaa suuria kuormia.<br>
Puskurilla voidaan tehdä mm. säädettäviä jännitelähteitä ja puskuroida heikon virransyöttökyvyn omaavia laitteita. Sillä voidaan tehdä "analyysierotin" jolla passiivisten piirien lohkoja kyetään erottamaan toisistaan, tällöin piirianalyysiä voidaan tehdä lohko kerrallaan.</p>
<p>Lääketieteellisissä instrumenteissa puskuria käytetään hyvin korkeaimpedanssisen signaalilähteen (mitattava kohde) kytkemiseksi lähes ääretön impedanssisen operaatiovahvistimen läpi matalaimpedanssiselle mittalaitteiston virtapiirille joka edelleen prosessoi signaalia mm. filtteröi ja vahvistaa.</p>
<p>Koitan saada latexin toimimaan niin ei tarvitsisi noita yhtälöitä käydä editorilta erikseen tallettamassa kuvaksi ja liittää tänne:&nbsp;<a href="http://www.codecogs.com/latex/eqneditor.php">http://www.codecogs.com/latex/eqneditor.php</a></p>
<h3>Jatkuu aiheesta: Epälineaarisuudet, biasvirtojen eliminointi ja differentiaalivahvistin sekä Instrumentointivahvistin.</h3>
			</div><!-- .entry-content -->
	
	<footer class="entry-meta">
								<span class="cat-links">
				Posted in <a href="http://blog.macrowear.com/category/uncategorized/" title="View all posts in Uncategorized" rel="tag">Uncategorized</a>			</span>
			<span class="sep"> | </span>
			
					
				<span class="comments-link"><a href="http://blog.macrowear.com/2013/09/back-to-the-basics-operaatiovahvistimista/#respond" title="Comment on Back to the basics - operaatiovahvistimista">Leave a comment</a></span>
		<span class="sep"> | </span>
		
			</footer><!-- #entry-meta -->
</article><!-- #post-116 -->

				
					
<article id="post-108" class="post-108 post type-post status-publish format-standard hentry category-emg category-lihakset category-teoria tag-emg tag-ina128">
		<header class="entry-header">
		<h1 class="entry-title"><a href="http://blog.macrowear.com/2013/09/emg-kohti-paallepuettavaa-isometrista-ohjausta/" title="Permalink to EMG, kohti päällepuettavaa isometristä ohjausta" rel="bookmark">EMG, kohti päällepuettavaa isometristä ohjausta</a></h1>

				<div class="entry-meta">
			<span class="sep">Posted on </span><a href="http://blog.macrowear.com/2013/09/emg-kohti-paallepuettavaa-isometrista-ohjausta/" title="9:24 pm" rel="bookmark"><time class="entry-date" datetime="2013-09-22T21:24:09+00:00">September 22, 2013</time></a><span class="byline"> <span class="sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://blog.macrowear.com/author/nezeht/" title="View all posts by PH" rel="author">PH</a></span></span>		</div><!-- .entry-meta -->
			</header><!-- .entry-header -->

		<div class="entry-content post_content">
		<p>Raflaava otsikko mutta kaikki on mahdollista. Samalla kun kerää materiaalia ja pänttää teoriaa, on käynyt mielessä ajatus laajentaa tai pikemminkin ehkä levittää tai siirtää työn aihetta EEG:stä kohti lihasten mittausta. EMG- eli Elektromyografialaite saattaa tarjota potentiaalisemman sovellusalueen kuin EEG. Jotain rajausta työhön on tehtävä, molemmat ovat laajoja aiheita ja molempia ei ole aikaa toteuttaa siinä mittakaavassa, että lopputuloksesta tulisi myös mielenkiintoisia päätelmiä ja jatkokehitysideoita.</p>
<p>Perusperiaate on sama, molemmissa, sekä EEG:ssä että EMG:ssä, mitataan heikkoa solutason potentiaalieroa kahden eri mittaelektrodin välillä ja molemmissa käytetään tarvittaessa referenssielektrodia. Tätä kirjoittaessa kumpikin vaihtoehto on mahdollinen. Päätöstä en ole osannut vielä tehdä.</p>
<h3>&nbsp;</h3>
<h3>Perusteita EMG:stä</h3>
<p>Lihaksissa on lihassolut ja ns. alfamotoneuroni muodostaa motorisen yksikön jossa on asetyliinikoliinia joka lihaksen supistuessa synnyttää kemiallisen reaktion. Reaktiosta seuraa lihassolukalvolle aktiopotentiaali jota kutsutaan myoelektriseksi signaaliksi. Tätä jännitettä EMG-laite mittaa. Signaalin amplitudi on sitä suurempi mitä suurempi on lihassolun halkaisija. Kudokset vaimentavat signaalia joten mitä etäämmällä lihaksesta elektrodi on sitä pienempi on amplitudi. Yksi EMG-signaali on lihaksessa toimivien motoristen yksiköiden potentiaalien summa.&nbsp;On voitu mittaamalla havaita, että aktiopotentiaali on suoraan verrannollinen tuotettuun voimaan.</p>
<p><a href="http://macrowear.com/blog/wp-content/uploads/2013/09/emglaite2.gif" rel="lightbox-0"><img class="alignright size-medium wp-image-111" style="border:1px solid black;" alt="emglaite2" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/emglaite2.gif" width="300" height="201"></a></p>
<p>EMG-signaalien jännitetaso on n. 1-30mV ja lihaksen taajuus eli lihaksessa tapahtuva sähköimpulssisykli on n. 7-25Hz. Ollaan samoilla jännite- ja taajuusalueille kuin aivosähkösignaaleja mitattaessa. Tämä asettaa myös elektrodeille ja vahvistinpiirille hyvin samankaltaiset vaatimukset. Joissakin lihaksissa syntyy tosin jopa n. 500Hz taajuus <em>(tarkistettava)</em>.</p>
<p>EMG-laitteissa käytetään bipolaarista tai monopolaarista elektroditopologiaa. &nbsp;Molemmissa käytetään referenssielektrodia johon mittauselektrodin potentiaalia verrataan. Referenssi on oltava sähköisessä mielessä mahdollisimman stabiilissa paikassa. Monopolaarisesta mittauksesta elektrodin kautta välittyy kaikki sen läheisyydessä vaikuttavat signaalit, myös häiriöt. Bipolaarisessa on kaksi mittaelektrodia joista molemmat mittaavat saman häiriösignaalin. Häiriä suodattuu differentiaalivahvistimessa pois, sillä vahvistin vahvistaa mittaelektrodeista sisääntulevien signaalien erotuksen.</p>
<h3>Yksinkertaisen EMG-laitteen vahvistinpiirin kytkentäperiaate</h3>
<p>Texas Instrumentin INA128 instrumentaatiovahvistin soveltuu hyvin miniatyyriseen EMG-mittalaitteen vahvistimeksi. Tässä yksi esimerkki EMG-vahvistimesta.</p>
<p><a href="http://macrowear.com/blog/wp-content/uploads/2013/09/emglaite.gif" rel="lightbox-1"><img class="alignnone size-medium wp-image-110" style="border:1px solid black;" alt="emglaite" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/emglaite.gif" width="300" height="203"></a></p>
<p>EMG-signaali vastaanotetaan kahdelta kahdelta elektrodilta E1 ja E2 jotka on kytketty INA128 tuloihin 2 ja 3. Vahvistin saa käyttöjännitteensä kahdesta sarjaankytketystä 9V paristosta joilla tehdään jännitteenjako maattamalla paristojen välistä (virtuaalimaa) referenssielektrodille. Paristojen positiivinen ja negatiivinen napa eli +9V ja -9V kytketään INA128 virransyöttönastoille 7 ja 4. Maa kytketään vielä &nbsp;nastaan 5.</p>
<p>Tulonastat 1 ja 8 määrittelee vahvistuskertoimen kun niiden väliin on kytketty vastus. Samalla voidaan laittaa vastuksen kanssa sarjaan kondensaattori jolloin saadaan nostettua reaktiivista impedanssia ja lisättyä piiriin ylipäästösuodatin. Vastuksen resistanssin ollessa 120ohm ja kondensaattorin kapasitanssi 50mikroF, saadaan vahvistukseksi n. 400 ja ylipäästön rajataajuudeksi 15Hz. Kuvan esimerkissä on käytetty kahta elektrolyyttikondensaattoria mutta yksi keraaminen 50mikroF kondensaattori käy yhtä hyvin. INA128 lähtönasta 6 kytketään näyttölaitteelle jossa A/D muunnin. &nbsp;Laite voi olla vaikkapa oskilloskoopi tai äänikortti. &nbsp;Elektrodien keskikohtien etäisyys toisistaan tulee olla n. 2cm. &nbsp;Ja toki galvaaninen erotus olisi ehkä hyvä vahvistinpiirin ja näyttölaitteen välissä. Haasteena EMG-laitteessa on häiriöt, Kuten EEG-mittauksessakin elektroniikkalaitteet ympäristössä aiheuttaa häiriötä koko mittausalueella n. 0-1000Hz. Hyvillä komponenteilla ja hyvällä suunnittelulla häiriöitä voidaan pienentää.</p>
<p>Tästä ei ole pitkä matka ohjaushansikkaaseen, rannekelloon tai älyranteeseen jolle voi antaa komentoja isometrisillä lihasliikkeillä ts. lihasaktivaatioilla jotka eivät vaadi näkyviä fyysisiä liikkeitä.</p>
<p>Lähteet:</p>
<p><em>TI:n &nbsp;INA128 Datasheet:&nbsp;<a href="http://www.ti.com/lit/ds/symlink/ina128.pdf">http://www.ti.com/lit/ds/symlink/ina128.pdf<br> </a></em><em>Motorinen yksikkö:&nbsp;<a href="http://fi.wikipedia.org/wiki/Motorinen_yksikk%C3%B6">http://fi.wikipedia.org/wiki/Motorinen_yksikk%C3%B6</a></em></p>
			</div><!-- .entry-content -->
	
	<footer class="entry-meta">
								<span class="cat-links">
				Posted in <a href="http://blog.macrowear.com/category/emg/" title="View all posts in EMG" rel="tag">EMG</a>, <a href="http://blog.macrowear.com/category/lihakset/" title="View all posts in lihakset" rel="tag">lihakset</a>, <a href="http://blog.macrowear.com/category/teoria/" title="View all posts in teoria" rel="tag">teoria</a>			</span>
			<span class="sep"> | </span>
			
						<span class="tag-links">
				Tagged <a href="http://blog.macrowear.com/tag/emg/" rel="tag">EMG</a>, <a href="http://blog.macrowear.com/tag/ina128/" rel="tag">INA128</a>			</span>
			<span class="sep"> | </span>
					
				<span class="comments-link"><a href="http://blog.macrowear.com/2013/09/emg-kohti-paallepuettavaa-isometrista-ohjausta/#respond" title="Comment on EMG, kohti päällepuettavaa isometristä ohjausta">Leave a comment</a></span>
		<span class="sep"> | </span>
		
			</footer><!-- #entry-meta -->
</article><!-- #post-108 -->

				
					
<article id="post-88" class="post-88 post type-post status-publish format-standard hentry category-differentiaalivahvistin category-eeg-kytkennat category-teoria tag-kytkennat tag-teoria tag-topologia">
		<header class="entry-header">
		<h1 class="entry-title"><a href="http://blog.macrowear.com/2013/09/eeg-kytkennoista/" title="Permalink to EEG kytkennöistä" rel="bookmark">EEG kytkennöistä</a></h1>

				<div class="entry-meta">
			<span class="sep">Posted on </span><a href="http://blog.macrowear.com/2013/09/eeg-kytkennoista/" title="9:15 pm" rel="bookmark"><time class="entry-date" datetime="2013-09-18T21:15:40+00:00">September 18, 2013</time></a><span class="byline"> <span class="sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://blog.macrowear.com/author/nezeht/" title="View all posts by PH" rel="author">PH</a></span></span>		</div><!-- .entry-meta -->
			</header><!-- .entry-header -->

		<div class="entry-content post_content">
		<p>Ennen varsinaista toteutusta ja simulointia selvitän EEG-kytkennän teoriaa jotta tulisi itsellenikin tutuksi. Seuraavassa kolmesta käytetyimmästä elektrodien kytkentätyypistä.</p>
<p>EEG laite vahvistaa differentiaalivahvistimilla jokaisen kahden elektrodin potentiaalieron. Vahvistimelle menevistä elektrodeista toinen on aina ns. aktiivinen ja toinen referenssielektrodi. Tämä signaali voidaan esittää kanavana yksinkertaistettuna ao kuvan mukaisesti.</p>
<p><a href="http://macrowear.com/blog/wp-content/uploads/2013/09/eeg_kanava.gif" rel="lightbox-0"><img class="alignnone size-medium wp-image-89" style="border:1px solid black;" alt="eeg_kanava" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/eeg_kanava.gif" width="300" height="75"></a></p>
<p>Topologiaa, jolla elektrodiparit on kytketty EEG laitteen vahvistimille, kutsutaan yleisesti EEG-kytkennäksi ja tästä käytetään myös lainasanaa "montage" .&nbsp; Näitä kytkentätopologioita on&nbsp; käytännössä kolme:</p>
<ol>
<li>Yhteisreferenssikytkentä</li>
<li>Keskiarvoreferenssikytkentä</li>
<li>Bipolaarinen</li>
</ol>
<p>Näistä yhteisreferenssi-, ja keskiarvoreferenssikytkentä ovat ns. monopolaarisia jolla tarkoitetaan referentiaalisia kytkentöjä. Näille on tyypillistä, että kunkin kanavan differentiaalivahvistimen toiseen tuloon syötetään sama referenssi. Monopolaarisessa kytkennässä yhteinen referenssi kannattaa ottaa sellaisesta kohtaa johon aivojen sisäinen jännitevaihtelu ei vaikuta.</p>
<h3></h3>
<h3><strong>Yhteisreferenssikytkentä (monopolaarinen)</strong></h3>
<p>Jokaiselle vahvistimelle kytketään elektrodi mittauspisteeltä (aktiivinen) ja referenssielektrodi. Samaa referenssielektrodia käytetään kaikissa mittauskanavissa. 10-20-järjestelmässä yleisimmin käytetyt referenssielektrodit ovat A1, A2 eli korvaelektrodi, tai A1 ja A2 yhteenkytkettynä. Yhteisreferenssikytkentä on nykyisissä digitaalisissa EEG laitteissa käytetyin kytkentä. EEG ohjelmistoissa voidaan tarvittaessa laskennallisesti muuttaa referenssiä. Tässä työssä tullaan käyttämään tätä kyseistä kytkentää.</p>
<p><a href="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/eeg_yhteismontage.gif" rel="lightbox-1"><img class="size-full wp-image-90 alignnone" style="border:1px solid black;" alt="eeg_yhteismontage" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/eeg_yhteismontage.gif" width="260" height="260"></a><br>
<em>Kuva1. yhteisreferenssikytkentä referenssielektrodina A2</em></p>
<h3></h3>
<h3><strong>Keskiarvoreferenssikytkentä&nbsp;<strong>(monopolaarinen)</strong></strong></h3>
<p>Keskiarvokytkennässä elektrodeilta tulevat signaalit summataan yhteen ja keskiarvoistetaan. yhteiseksi referenssitasoksi. Kukin elektrodisignaali ja vastuksen läpi tuleva laskettu keskiarvoreferenssi syötetään differentiaalivahvistimen tuloihin.&nbsp; EEG-laite yleensä myös tarjoaa käyttäjälle mahdollisuuden valita mistä elektrodeista keskiarvo lasketaan.</p>
<p><a href="http://macrowear.com/blog/wp-content/uploads/2013/09/eeg_keskiarvomontage.gif" rel="lightbox-2"><img class="alignnone size-medium wp-image-92" style="border:1px solid black;" alt="eeg_keskiarvomontage" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/eeg_keskiarvomontage.gif" width="300" height="232"><br>
</a><em>Kuva 2. Keskiarvoreferenssikytkentä</em></p>
<h3></h3>
<h3><strong>Bipolaarikytkentä</strong></h3>
<p>Tässä kytkennässä suorassa linjassa kallon etuosasta takaosaan olevat elektrodit (anterior-posterior) tai poikittaiset elektrodit (vasen-oikea) syötetään peräkkäin differentiaalivahvistimille. Kuvan esimerkissä ensimmäisen vahvistimen tuloihin syötetään elektrodit FP1 ja F3, toiseen vahvistimeen F3 ja C3 ja niin edelleen.</p>
<p><a href="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/eeg_bipolaarimontage.gif" rel="lightbox-3"><img class="alignnone size-full wp-image-95" style="border:1px solid black;" alt="eeg_bipolaarimontage" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/eeg_bipolaarimontage.gif" width="250" height="250"><br>
</a><em>Kuva 3. Bipolaarikytkentä</em></p>
<h3></h3>
<h3><strong>Elektrodien asettelu</strong></h3>
<p>Kliinisessä aivotutkimuksessa elektrodien sijainti pään pinnalla noudattaa kansainvälistä 10-20-järjestelmää. &nbsp;Edellä kuvattujen kytkentöjen elektrodien sijainnit näkee ao kuvasta.</p>
<p><a href="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/electrodes.png" rel="lightbox-4"><img class="alignnone size-full wp-image-101" alt="electrodes" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/electrodes.png" width="280" height="290"></a></p>
<p><em>Kuvassa 10-20-järjestelmä. Nenänsivuelektrodit Pg1 ja Pg2, otsaelektrodit Fp1 ja Fp2, etulohkon elektrodit F7, F3, FZ, F4 ja F8, keskilohkon elektrodit C3, CZ ja C4, ohimolohkon elektrodit T3, T4, T5 ja T6, päälaenlohkon elektrodit P3, PZ ja P4, takaraivolohkon elektrodit O1 ja O2, korvalehden elektrodit A1 ja A2, sekä pikkuaivojen elektrodit Cb1 ja Cb2.</em></p>
<h3></h3>
<h3><strong>Maaelektrodi ja CMRR</strong></h3>
<p>Mitattava keho toimii antennina joka kerää ympäristöstä elektromagneettista häiriötä. Tätä yhteismuotoista häiriötä vaimentamaan voidaan käyttää mm. Faradayn häkkiä. Hieman kevyempi ratkaisu on maaelektrodin kytkentä, joka samalla myös määrittelee mitattavien potentiaalien nollatason. Tämä toteutetaan ns. "Right Leg Drive" eli RLD-kytkennällä (ja DRL).&nbsp;Kytkentään törmää EEG:n lisäksi mm. ECG ja EMG laitteissa.</p>
<p><a href="http://macrowear.com/blog/wp-content/uploads/2013/09/rld.gif" rel="lightbox-5"><img class="alignnone size-medium wp-image-99" alt="rld" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/rld.gif" width="300" height="121"><br>
</a><em>Texas Instrumentsin RLD-ohjeistus INA114 instrumenttivahvistimen kanssa ECG-laitteessa.</em></p>
<p>RLD-kytkennästä lisää:</p>
<p><a href="http://www.ti.com/general/docs/litabsmultiplefilelist.tsp?literatureNumber=sbaa188">http://www.ti.com/general/docs/litabsmultiplefilelist.tsp?literatureNumber=sbaa188</a></p>
<p><a href="http://www.planetanalog.com/document.asp?doc_id=528240&site=planetanalog">http://www.planetanalog.com/document.asp?doc_id=528240&amp;site=planetanalog</a></p>
<p><a href="http://www.ti.com/product/ADS1299">http://www.ti.com/product/ADS1299</a></p>
			</div><!-- .entry-content -->
	
	<footer class="entry-meta">
								<span class="cat-links">
				Posted in <a href="http://blog.macrowear.com/category/differentiaalivahvistin/" title="View all posts in differentiaalivahvistin" rel="tag">differentiaalivahvistin</a>, <a href="http://blog.macrowear.com/category/eeg-kytkennat/" title="View all posts in EEG-kytkennät" rel="tag">EEG-kytkennät</a>, <a href="http://blog.macrowear.com/category/teoria/" title="View all posts in teoria" rel="tag">teoria</a>			</span>
			<span class="sep"> | </span>
			
						<span class="tag-links">
				Tagged <a href="http://blog.macrowear.com/tag/kytkennat/" rel="tag">kytkennät</a>, <a href="http://blog.macrowear.com/tag/teoria/" rel="tag">teoria</a>, <a href="http://blog.macrowear.com/tag/topologia/" rel="tag">topologia</a>			</span>
			<span class="sep"> | </span>
					
				<span class="comments-link"><a href="http://blog.macrowear.com/2013/09/eeg-kytkennoista/#respond" title="Comment on EEG kytkennöistä">Leave a comment</a></span>
		<span class="sep"> | </span>
		
			</footer><!-- #entry-meta -->
</article><!-- #post-88 -->

				
				<div class="pagination"><span>Page 1 of 2</span><span class="current">1</span><a href="http://blog.macrowear.com/page/2/" class="inactive">2</a></div>

			
        </div> <!-- end #main -->

        		<div id="sidebar" class="widget-area col300" role="complementary">
					<div class="widget-wrap"><aside id="th0ths_quotes_widget-2" class="widget widget_th0ths_quotes_widget">		<h2 class="widget-title"> </h2>		<div id="th0ths_quotes_widget_quote" style="font-style: oblique;">It you thought that science was certain -- well, that is just an error on your part.<br> <br>
- Richard P. Feynman</div>
		<div id="th0ths_quotes_widget_owner" style="float: right;">
					  
							  
					- 		</div>
				</aside></div>		<div class="widget-wrap"><aside id="recent-posts-3" class="widget widget_recent_entries">		<h2 class="widget-title">Viimeisimmät</h2>		<ul>
					<li>
				<a href="http://blog.macrowear.com/2013/11/neuroverkko-signaalintunnistuksessa/" title="Neuroverkko aivosähkösignaalin tunnistuksessa">Neuroverkko aivosähkösignaalin tunnistuksessa</a>
						</li>
					<li>
				<a href="http://blog.macrowear.com/2013/10/konvoluutio-ja-digitaalinen-suodatus/" title="Konvoluutio ja digitaalinen suodatus">Konvoluutio ja digitaalinen suodatus</a>
						</li>
					<li>
				<a href="http://blog.macrowear.com/2013/10/langattomien-bioantureiden-ekosysteemi/" title="Langattomien bioantureiden ekosysteemi">Langattomien bioantureiden ekosysteemi</a>
						</li>
					<li>
				<a href="http://blog.macrowear.com/2013/10/elektrodeista/" title="486 sanaa elektrodeista">486 sanaa elektrodeista</a>
						</li>
					<li>
				<a href="http://blog.macrowear.com/2013/10/matka_vuoteen_2020/" title="Matka vuoteen 2020">Matka vuoteen 2020</a>
						</li>
					<li>
				<a href="http://blog.macrowear.com/2013/09/kaistanpaasto-ja-suodattimet/" title="Kaistanpäästön valinta ja suodattimet">Kaistanpäästön valinta ja suodattimet</a>
						</li>
					<li>
				<a href="http://blog.macrowear.com/2013/09/hill-ja-horowitz/" title="Hillin ja Horowitzin kanssa kahvilla">Hillin ja Horowitzin kanssa kahvilla</a>
						</li>
					<li>
				<a href="http://blog.macrowear.com/2013/09/back-to-the-basics-operaatiovahvistimista/" title="Back to the basics - operaatiovahvistimista">Back to the basics - operaatiovahvistimista</a>
						</li>
					<li>
				<a href="http://blog.macrowear.com/2013/09/emg-kohti-paallepuettavaa-isometrista-ohjausta/" title="EMG, kohti päällepuettavaa isometristä ohjausta">EMG, kohti päällepuettavaa isometristä ohjausta</a>
						</li>
					<li>
				<a href="http://blog.macrowear.com/2013/09/eeg-kytkennoista/" title="EEG kytkennöistä">EEG kytkennöistä</a>
						</li>
					<li>
				<a href="http://blog.macrowear.com/2013/09/signaaleista-ja-laitteesta-pari-sanaa/" title="Signaaleista ja laitteesta pari sanaa">Signaaleista ja laitteesta pari sanaa</a>
						</li>
					<li>
				<a href="http://blog.macrowear.com/2013/09/ohjelmistot1/" title="Simulointi- ja suunnitteluohjelmistot">Simulointi- ja suunnitteluohjelmistot</a>
						</li>
					<li>
				<a href="http://blog.macrowear.com/2013/09/tyon-aihealueesta-ja-hieman-sisallysluettelon-raakiletta/" title="Työn aihealueesta ja hieman sisällysluettelon raakiletta">Työn aihealueesta ja hieman sisällysluettelon raakiletta</a>
						</li>
					<li>
				<a href="http://blog.macrowear.com/2013/09/tyopaivakirja-avattu-extended-memory/" title="Työpäiväkirja avattu - Extended memory">Työpäiväkirja avattu - Extended memory</a>
						</li>
				</ul>
		</aside></div><div class="widget-wrap"><aside id="ja-github-2" class="widget guthub-repo-widget"><h2 class="widget-title">GitHub repos</h2><ul><li><a href="https://github.com/puuparta/AutoBisect">AutoBisect</a></li><li><a href="https://github.com/puuparta/crayfish">crayfish</a></li><li><a href="https://github.com/puuparta/Djaneiro">Djaneiro</a></li><li><a href="https://github.com/puuparta/django">django</a></li><li><a href="https://github.com/puuparta/django-bootstrap-toolkit">django-bootstrap-toolkit</a></li><li><a href="https://github.com/puuparta/django-overextends">django-overextends</a></li><li><a href="https://github.com/puuparta/django-twoscoops-project">django-twoscoops-project</a></li><li><a href="https://github.com/puuparta/DjangoPi">DjangoPi</a></li><li><a href="https://github.com/puuparta/django_bootcamp">django_bootcamp</a></li><li><a href="https://github.com/puuparta/ECG_Thesis">ECG_Thesis</a></li><li><a href="https://github.com/puuparta/flask">flask</a></li><li><a href="https://github.com/puuparta/go-rpio">go-rpio</a></li><li><a href="https://github.com/puuparta/Kraken_Example_Custom_Middleware">Kraken_Example_Custom_Middleware</a></li><li><a href="https://github.com/puuparta/miscellaneous_work">miscellaneous_work</a></li><li><a href="https://github.com/puuparta/motiondetector">motiondetector</a></li><li><a href="https://github.com/puuparta/pinax-project-zero">pinax-project-zero</a></li><li><a href="https://github.com/puuparta/python-docx">python-docx</a></li><li><a href="https://github.com/puuparta/SublimeText-Nodejs">SublimeText-Nodejs</a></li><li><a href="https://github.com/puuparta/timewarp">timewarp</a></li><li><a href="https://github.com/puuparta/todo-django">todo-django</a></li><li><a href="https://github.com/puuparta/treeio">treeio</a></li><li><a href="https://github.com/puuparta/tripping-octo-bear">tripping-octo-bear</a></li><li><a href="https://github.com/puuparta/tulip-talk">tulip-talk</a></li><li><a href="https://github.com/puuparta/WsprryPi">WsprryPi</a></li></ul><iframe src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/github-btn.htm" allowtransparency="true" frameborder="0" scrolling="0" width="165px" height="20px" style="display:block;margin:15px auto 0;"></iframe></aside></div><div class="widget-wrap"><aside id="nav_menu-2" class="widget widget_nav_menu"><h2 class="widget-title">Linkkejä</h2><div class="menu-linkit-container"><ul id="menu-linkit" class="menu"><li id="menu-item-359" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-359"><a>Electronics</a>
<ul class="sub-menu">
	<li id="menu-item-236" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-236"><a href="http://www.adafruit.com/category/65">Adafruit wearables</a></li>
	<li id="menu-item-237" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-237"><a href="http://www.ti.com/lsds/ti/analog/webench/webench-filters.page">TI Filter Design Tool</a></li>
</ul>
</li>
<li id="menu-item-357" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-357"><a>EEG</a>
<ul class="sub-menu">
	<li id="menu-item-238" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-238"><a href="http://openeeg.sourceforge.net/doc/">openEEG Project</a></li>
	<li id="menu-item-239" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-239"><a href="http://sccn.ucsd.edu/eeglab/">EEGLAB Matlab toolbox</a></li>
	<li id="menu-item-240" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-240"><a href="http://sccn.ucsd.edu/wiki/Introduction_To_Modern_Brain-Computer_Interface_Design">Modern BCI Design Course</a></li>
	<li id="menu-item-241" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-241"><a href="http://biosig.sourceforge.net/download.html">BioSig for Octave and Matlab</a></li>
</ul>
</li>
<li id="menu-item-358" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-358"><a>Python and DSP</a>
<ul class="sub-menu">
	<li id="menu-item-354" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-354"><a href="http://matplotlib.org/">Matplotlib</a></li>
	<li id="menu-item-355" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-355"><a href="http://jakevdp.github.io/">Pythonic Perambulations</a></li>
	<li id="menu-item-447" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-447"><a href="http://nipy.sourceforge.net/nipy/stable/users/glm_spec.html#id2">NiPy - Hermodynamic and Neuroimaging model</a></li>
	<li id="menu-item-356" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-356"><a href="http://nbviewer.ipython.org/3919130">Working with Numpy FFT Results: Scaling and Folding</a></li>
	<li id="menu-item-362" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-362"><a href="http://vibrationdata.com/python-wiki">Tom Irvine's Python scripts from Vibrationdata</a></li>
</ul>
</li>
<li id="menu-item-360" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-360"><a href="http://nbviewer.ipython.org/">IPython Notebooks</a></li>
</ul></div></aside></div><div class="widget-wrap"><aside id="archives-2" class="widget widget_archive"><h2 class="widget-title">Arkisto</h2>		<ul>
			<li><a href="http://blog.macrowear.com/2013/11/" title="November 2013">November 2013</a>&nbsp;(1)</li>
	<li><a href="http://blog.macrowear.com/2013/10/" title="October 2013">October 2013</a>&nbsp;(4)</li>
	<li><a href="http://blog.macrowear.com/2013/09/" title="September 2013">September 2013</a>&nbsp;(9)</li>
		</ul>
</aside></div><div class="widget-wrap"><aside id="categories-2" class="widget widget_categories"><h2 class="widget-title">Aihealueet</h2>		<ul>
	<li class="cat-item cat-item-40"><a href="http://blog.macrowear.com/category/aktiivinen-elektrodi/" title="View all posts filed under aktiivinen elektrodi">aktiivinen elektrodi</a>
</li>
	<li class="cat-item cat-item-13"><a href="http://blog.macrowear.com/category/alipaastosuodin/" title="View all posts filed under alipäästösuodin">alipäästösuodin</a>
</li>
	<li class="cat-item cat-item-38"><a href="http://blog.macrowear.com/category/bci/" title="View all posts filed under BCI">BCI</a>
</li>
	<li class="cat-item cat-item-52"><a href="http://blog.macrowear.com/category/deltafunktio/" title="View all posts filed under deltafunktio">deltafunktio</a>
</li>
	<li class="cat-item cat-item-14"><a href="http://blog.macrowear.com/category/differentiaalivahvistin/" title="View all posts filed under differentiaalivahvistin">differentiaalivahvistin</a>
</li>
	<li class="cat-item cat-item-51"><a href="http://blog.macrowear.com/category/digitaalinen-suodatin/" title="View all posts filed under digitaalinen suodatin">digitaalinen suodatin</a>
</li>
	<li class="cat-item cat-item-53"><a href="http://blog.macrowear.com/category/dsp/" title="View all posts filed under DSP">DSP</a>
</li>
	<li class="cat-item cat-item-20"><a href="http://blog.macrowear.com/category/eeg-kytkennat/" title="View all posts filed under EEG-kytkennät">EEG-kytkennät</a>
</li>
	<li class="cat-item cat-item-46"><a href="http://blog.macrowear.com/category/ekosysteemi/" title="View all posts filed under Ekosysteemi">Ekosysteemi</a>
</li>
	<li class="cat-item cat-item-24"><a href="http://blog.macrowear.com/category/emg/" title="View all posts filed under EMG">EMG</a>
</li>
	<li class="cat-item cat-item-7"><a href="http://blog.macrowear.com/category/filtterit/" title="View all posts filed under filtterit">filtterit</a>
</li>
	<li class="cat-item cat-item-15"><a href="http://blog.macrowear.com/category/ideointi/" title="View all posts filed under ideointi">ideointi</a>
</li>
	<li class="cat-item cat-item-31"><a href="http://blog.macrowear.com/category/kaistanpaast/" title="View all posts filed under kaistanpääst">kaistanpääst</a>
</li>
	<li class="cat-item cat-item-50"><a href="http://blog.macrowear.com/category/konvoluutio/" title="View all posts filed under konvoluutio">konvoluutio</a>
</li>
	<li class="cat-item cat-item-41"><a href="http://blog.macrowear.com/category/kyparaintegraatio/" title="View all posts filed under kypäräintegraatio">kypäräintegraatio</a>
</li>
	<li class="cat-item cat-item-26"><a href="http://blog.macrowear.com/category/lihakset/" title="View all posts filed under lihakset">lihakset</a>
</li>
	<li class="cat-item cat-item-57"><a href="http://blog.macrowear.com/category/mlp/" title="View all posts filed under MLP">MLP</a>
</li>
	<li class="cat-item cat-item-56"><a href="http://blog.macrowear.com/category/neuroverkko/" title="View all posts filed under neuroverkko">neuroverkko</a>
</li>
	<li class="cat-item cat-item-9"><a href="http://blog.macrowear.com/category/opamps/" title="View all posts filed under opamps">opamps</a>
</li>
	<li class="cat-item cat-item-42"><a href="http://blog.macrowear.com/category/passiivinen-elektrodi/" title="View all posts filed under passiivinen elektrodi">passiivinen elektrodi</a>
</li>
	<li class="cat-item cat-item-19"><a href="http://blog.macrowear.com/category/signaalit/" title="View all posts filed under signaalit">signaalit</a>
</li>
	<li class="cat-item cat-item-11"><a href="http://blog.macrowear.com/category/simulointi/" title="View all posts filed under simulointi">simulointi</a>
</li>
	<li class="cat-item cat-item-35"><a href="http://blog.macrowear.com/category/suodatin/" title="View all posts filed under suodatin">suodatin</a>
</li>
	<li class="cat-item cat-item-37"><a href="http://blog.macrowear.com/category/taajuusvaste/" title="View all posts filed under taajuusvaste">taajuusvaste</a>
</li>
	<li class="cat-item cat-item-22"><a href="http://blog.macrowear.com/category/teoria/" title="View all posts filed under teoria">teoria</a>
</li>
	<li class="cat-item cat-item-2"><a href="http://blog.macrowear.com/category/thesis/" title="View all posts filed under thesis">thesis</a>
</li>
	<li class="cat-item cat-item-39"><a href="http://blog.macrowear.com/category/tulevaisuus/" title="View all posts filed under tulevaisuus">tulevaisuus</a>
</li>
	<li class="cat-item cat-item-12"><a href="http://blog.macrowear.com/category/tyokalut/" title="View all posts filed under työkalut">työkalut</a>
</li>
	<li class="cat-item cat-item-1"><a href="http://blog.macrowear.com/category/uncategorized/" title="View all posts filed under Uncategorized">Uncategorized</a>
</li>
		</ul>
</aside></div><div class="widget-wrap"><aside id="tag_cloud-2" class="widget widget_tag_cloud"><h2 class="widget-title">Tagit</h2><div class="tagcloud"><a href="http://blog.macrowear.com/tag/atmega/" class="tag-link-49" title="1 topic" style="font-size: 8pt;">ATMega</a>
<a href="http://blog.macrowear.com/tag/bioanturi/" class="tag-link-47" title="1 topic" style="font-size: 8pt;">bioanturi</a>
<a href="http://blog.macrowear.com/tag/desibeli/" class="tag-link-30" title="1 topic" style="font-size: 8pt;">desibeli</a>
<a href="http://blog.macrowear.com/tag/dsp-2/" class="tag-link-54" title="1 topic" style="font-size: 8pt;">dsp</a>
<a href="http://blog.macrowear.com/tag/eda/" class="tag-link-6" title="1 topic" style="font-size: 8pt;">EDA</a>
<a href="http://blog.macrowear.com/tag/eeg-esitystapa/" class="tag-link-55" title="1 topic" style="font-size: 8pt;">eeg esitystapa</a>
<a href="http://blog.macrowear.com/tag/ekosysteemi-2/" class="tag-link-48" title="1 topic" style="font-size: 8pt;">ekosysteemi</a>
<a href="http://blog.macrowear.com/tag/emg/" class="tag-link-24" title="1 topic" style="font-size: 8pt;">EMG</a>
<a href="http://blog.macrowear.com/tag/hh/" class="tag-link-27" title="1 topic" style="font-size: 8pt;">H&amp;H</a>
<a href="http://blog.macrowear.com/tag/hill/" class="tag-link-28" title="1 topic" style="font-size: 8pt;">Hill</a>
<a href="http://blog.macrowear.com/tag/horowitz/" class="tag-link-29" title="1 topic" style="font-size: 8pt;">Horowitz</a>
<a href="http://blog.macrowear.com/tag/ina128/" class="tag-link-25" title="1 topic" style="font-size: 8pt;">INA128</a>
<a href="http://blog.macrowear.com/tag/kaistanpaasto/" class="tag-link-32" title="1 topic" style="font-size: 8pt;">kaistanpäästö</a>
<a href="http://blog.macrowear.com/tag/keskiarvoreferenssi/" class="tag-link-16" title="1 topic" style="font-size: 8pt;">keskiarvoreferenssi</a>
<a href="http://blog.macrowear.com/tag/kicad/" class="tag-link-8" title="1 topic" style="font-size: 8pt;">KiCad</a>
<a href="http://blog.macrowear.com/tag/konvoluutio/" class="tag-link-50" title="1 topic" style="font-size: 8pt;">konvoluutio</a>
<a href="http://blog.macrowear.com/tag/kytkennat/" class="tag-link-21" title="1 topic" style="font-size: 8pt;">kytkennät</a>
<a href="http://blog.macrowear.com/tag/laite/" class="tag-link-17" title="1 topic" style="font-size: 8pt;">laite</a>
<a href="http://blog.macrowear.com/tag/laplace/" class="tag-link-33" title="1 topic" style="font-size: 8pt;">laplace</a>
<a href="http://blog.macrowear.com/tag/maaelektrodi/" class="tag-link-18" title="1 topic" style="font-size: 8pt;">maaelektrodi</a>
<a href="http://blog.macrowear.com/tag/materiaali/" class="tag-link-3" title="1 topic" style="font-size: 8pt;">materiaali</a>
<a href="http://blog.macrowear.com/tag/neuroverkko/" class="tag-link-56" title="1 topic" style="font-size: 8pt;">neuroverkko</a>
<a href="http://blog.macrowear.com/tag/nn/" class="tag-link-58" title="1 topic" style="font-size: 8pt;">NN</a>
<a href="http://blog.macrowear.com/tag/siirtofunktio/" class="tag-link-34" title="1 topic" style="font-size: 8pt;">siirtofunktio</a>
<a href="http://blog.macrowear.com/tag/simetrix/" class="tag-link-10" title="1 topic" style="font-size: 8pt;">SIMetrix</a>
<a href="http://blog.macrowear.com/tag/simulointi/" class="tag-link-11" title="1 topic" style="font-size: 8pt;">simulointi</a>
<a href="http://blog.macrowear.com/tag/sisalto/" class="tag-link-4" title="1 topic" style="font-size: 8pt;">sisältö</a>
<a href="http://blog.macrowear.com/tag/suodattimet/" class="tag-link-36" title="1 topic" style="font-size: 8pt;">suodattimet</a>
<a href="http://blog.macrowear.com/tag/suunnittelu/" class="tag-link-5" title="1 topic" style="font-size: 8pt;">suunnittelu</a>
<a href="http://blog.macrowear.com/tag/teoria/" class="tag-link-22" title="1 topic" style="font-size: 8pt;">teoria</a>
<a href="http://blog.macrowear.com/tag/thesis/" class="tag-link-2" title="1 topic" style="font-size: 8pt;">thesis</a>
<a href="http://blog.macrowear.com/tag/topologia/" class="tag-link-23" title="1 topic" style="font-size: 8pt;">topologia</a>
<a href="http://blog.macrowear.com/tag/tyokalut/" class="tag-link-12" title="1 topic" style="font-size: 8pt;">työkalut</a></div>
</aside></div>		</div><!-- #secondary .widget-area -->

    </div> <!-- end #content -->
        

	<footer id="colophon" role="contentinfo">
		<div id="site-generator">
			© Biopotentiaalisia ilmiöitä tutkimassa                        - Powered by <a href="http://wordpress.org/" title="Semantic Personal Publishing Platform">Wordpress</a>
			 and <a href="http://wpthemes.co.nz/">WPThemes.co.nz</a>
            		</div>
	</footer><!-- #colophon -->
</div><!-- #page -->

    <script type="text/javascript" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/shCore.js"></script>
    <script type="text/javascript" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/shAutoloader.js"></script>
    <script type="text/javascript">
    function path()
    {
      var args = arguments,
          result = []
          ;
      for(var i = 0; i < args.length; i++)
          result.push(args[i].replace('@', 'http://blog.macrowear.com/wp-content/plugins/syntax-highlighter-with-add-button-in-editor/scripts/'));
      return result
    };
    SyntaxHighlighter.autoloader.apply(null, path(
      'applescript            @shBrushAppleScript.js',
      'actionscript3 as3      @shBrushAS3.js',
      'bash shell             @shBrushBash.js',
      'coldfusion cf          @shBrushColdFusion.js',
      'cpp c                  @shBrushCpp.js',
      'c# c-sharp csharp      @shBrushCSharp.js',
      'css                    @shBrushCss.js',
      'delphi pascal          @shBrushDelphi.js',
      'diff patch pas         @shBrushDiff.js',
      'erl erlang             @shBrushErlang.js',
      'groovy                 @shBrushGroovy.js',
      'java                   @shBrushJava.js',
      'jfx javafx             @shBrushJavaFX.js',
      'js jscript javascript  @shBrushJScript.js',
      'perl pl                @shBrushPerl.js',
      'php                    @shBrushPhp.js',
      'text plain             @shBrushPlain.js',
      'ps                     @shBrushPowerShell.js',
      'py python              @shBrushPython.js',
      'ruby rails ror rb      @shBrushRuby.js',
      'sass scss              @shBrushSass.js',
      'scala                  @shBrushScala.js',
      'sql                    @shBrushSql.js',
      'vb vbnet               @shBrushVb.js',
      'xml xhtml xslt html    @shBrushXml.js',
      'other                  @shBrushOther.js'
    ));
    SyntaxHighlighter.defaults['auto-links'] = true;
    SyntaxHighlighter.defaults['collapse'] = false;
    SyntaxHighlighter.defaults['first-line'] = 1;
    SyntaxHighlighter.defaults['gutter'] = true;
    SyntaxHighlighter.defaults['smart-tabs'] = true;
    SyntaxHighlighter.defaults['tab-size'] = 4;
    SyntaxHighlighter.defaults['toolbar'] = true;
    SyntaxHighlighter.config.tagName = "pre";
	SyntaxHighlighter.config.clipboardSwf = 'http://blog.macrowear.com/wp-content/plugins/syntax-highlighter-with-add-button-in-editor/scripts/clipboard.swf';
    SyntaxHighlighter.all();
    </script>
    	<div style="display:none">
	</div>
<script type="text/javascript" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/devicepx-jetpack.js"></script>
<script type="text/javascript" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/functions.js"></script>
<script type="text/javascript" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/gprofiles.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type="text/javascript" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/wpgroho.js"></script>
<script type="text/javascript" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/jquery.ui.core.min.js"></script>
<script type="text/javascript" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/jquery.ui.widget.min.js"></script>
<script type="text/javascript" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/jquery.ui.mouse.min.js"></script>
<script type="text/javascript" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/jquery.ui.resizable.min.js"></script>
<script type="text/javascript" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/jquery.ui.draggable.min.js"></script>
<script type="text/javascript" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/jquery.ui.button.min.js"></script>
<script type="text/javascript" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/jquery.ui.position.min.js"></script>
<script type="text/javascript" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/jquery.ui.dialog.min.js"></script>

	<script src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/e-201419.js" type="text/javascript"></script>
	<script type="text/javascript">
	st_go({v:'ext',j:'1:2.3.3',blog:'59803024',post:'0',tz:'-2'});
	var load_cmc = function(){linktracker_init(59803024,0,2);};
	if ( typeof addLoadEvent != 'undefined' ) addLoadEvent(load_cmc);
	else load_cmc();
	</script><img id="wpstats" src="./Biopotentiaalisia ilmiöitä tutkimassa   Muistiinpanoja ja päiväkirjamerkintöjä._files/g.gif" alt="">

</body></html>